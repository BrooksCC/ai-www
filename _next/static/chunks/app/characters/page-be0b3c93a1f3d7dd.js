(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[471],{1876:(e,r,t)=>{Promise.resolve().then(t.bind(t,6469))},6469:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var s=t(5155),a=t(2115),l=t(5298),c=t(6821),d=t(5695),n=t(285),i=t(1394),o=t(2045),x=t(1795),m=t(8613),h=t(2847),u=t(5055),p=t(4421);let g=(e,r)=>{let[t,s]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let t=setTimeout(()=>{s(e)},r);return()=>{clearTimeout(t)}},[e,r]),t};function f(){let e=(0,d.useRouter)(),r=(0,o.j)();(0,o.G)(x.xu);let t=(0,o.G)(x.Kc),f=(0,o.G)(e=>e.character.categories),{fetchUserProfile:v}=(0,m.As)(),{characters:j,isLoading:b,error:N,filters:y,pagination:k,categories:w}=(0,h.Ib)(),{currentPage:C,totalPages:A}=k,{searchCharacters:I,setFilter:_}=(0,h.MM)(),[B,E]=(0,a.useState)(""),[L,T]=(0,a.useState)(""),M=g(L,500);(0,a.useEffect)(()=>{t||v()},[v,t]),(0,a.useEffect)(()=>{I(),r((0,u.zN)())},[I,y,r]),(0,a.useEffect)(()=>{_({search:M,page:1})},[M,_,I]);let S=(0,a.useCallback)(e=>{E(""),f.find(r=>r.id===e),_({categoryId:e,tags:[],page:1})},[f,_]),Q=(0,a.useCallback)(e=>{_({sortBy:e,page:1})},[_]),z=(0,a.useCallback)(()=>{if(!y.categoryId){let e=f.flatMap(e=>e.popularTags);return Array.from(new Set(e.map(e=>e.tag))).map(r=>e.find(e=>e.tag===r)).filter(Boolean)}let e=f.find(e=>e.id===y.categoryId);return e?e.popularTags:[]},[f,y.categoryId]),D=(0,a.useCallback)(e=>{let r=B===e?"":e;E(r),_({tags:r?[r]:[],page:1})},[B,_]),F=r=>{e.push("/character?id=".concat(r))},R=(0,a.useCallback)(()=>{C<A&&_({page:C+1})},[C,A,_]),G=(0,a.useCallback)(()=>{C>1&&_({page:C-1})},[C,_]);return(0,s.jsxs)("main",{className:"min-h-screen bg-background",children:[(0,s.jsx)(l.default,{}),(0,s.jsx)("div",{className:"pt-24 pb-16 px-4",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsx)("div",{className:"flex mb-6",children:(0,s.jsx)("div",{className:"flex border border-border rounded-md overflow-hidden",children:["最新","热门"].map((e,r)=>(0,s.jsx)("button",{className:"px-6 py-2 ".concat(y.sortBy===(0==r?p.Qi.createdAt:p.Qi.popularity)?"bg-primary/20 text-foreground":"bg-transparent text-muted-foreground hover:text-foreground"),onClick:()=>Q(0==r?p.Qi.createdAt:p.Qi.popularity),children:e},r))})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 mb-4",children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded-full text-sm bg-primary/20 text-foreground",onClick:()=>{},children:"分类"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded-full text-sm ".concat(y.categoryId?"bg-card text-muted-foreground hover:bg-muted":"bg-primary/20 text-foreground"),onClick:()=>S(""),children:"全部"},"all-categories"),f.map(e=>(0,s.jsx)("button",{className:"px-4 py-2 rounded-full text-sm ".concat(y.categoryId===e.id?"bg-primary/20 text-foreground":"bg-card text-muted-foreground hover:bg-muted"),onClick:()=>S(e.id),children:e.name},e.id))]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 mb-8",children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded-full text-sm bg-primary/20 text-foreground",onClick:()=>{},children:"标签"}),z().map(e=>(0,s.jsxs)("button",{className:"px-4 py-2 rounded-full text-sm ".concat(B===e.tag?"bg-primary/20 text-foreground":"bg-card text-muted-foreground hover:bg-muted"),onClick:()=>D(e.tag),children:[e.tag," (",e.count,")"]},"tag-".concat(e.tag)))]}),N&&(0,s.jsxs)("div",{className:"bg-destructive/20 text-destructive p-4 rounded-md mb-6",children:["加载角色时出错: ",N]}),b&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent text-primary motion-reduce:animate-[spin_1.5s_linear_infinite]",role:"status",children:(0,s.jsx)("span",{className:"sr-only",children:"加载中..."})}),(0,s.jsx)("p",{className:"mt-2 text-muted-foreground",children:"正在加载角色..."})]}),!b&&0===j.length&&(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"没有找到匹配的角色"})}),!b&&j.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:j.map(e=>(0,s.jsxs)("div",{className:"bg-transparent overflow-hidden cursor-pointer hover:transform hover:scale-[1.03] transition-all",onClick:()=>F(e.id),children:[(0,s.jsxs)("div",{className:"relative aspect-square mb-2",children:[(0,s.jsxs)(i.eu,{className:"w-full h-full rounded-md",children:[(0,s.jsx)(i.BK,{src:e.avatarUrl,alt:e.name,className:"object-cover",shouldBlur:e.shouldBlurAvatar}),(0,s.jsx)(i.q5,{className:"bg-[var(--bg-tertiary)] text-[var(--text-primary)]",children:e.name.charAt(0).toUpperCase()})]}),(0,s.jsx)("div",{className:"absolute bottom-2 left-2",children:(0,s.jsx)("span",{className:"bg-card/80 backdrop-blur-sm text-foreground px-3 py-1 rounded-full text-sm",children:e.categories&&e.categories.length>0?e.categories[0].name:"角色"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-foreground text-lg font-medium mb-1",children:e.name}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:e.tags.join(", ")})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:e.chats||0})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-400",fill:"currentColor",viewBox:"0 0 24 24",stroke:"none",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:e.popularity.toFixed(1)})]})]})]})]})]},e.id))}),A>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center mt-8 gap-4",children:[(0,s.jsx)(n.$,{variant:"outline",onClick:G,disabled:1===C||b,className:"border-border text-muted-foreground",children:"上一页"}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[C," / ",A]}),(0,s.jsx)(n.$,{variant:"outline",onClick:R,disabled:C===A||b,className:"border-border text-muted-foreground",children:"下一页"})]})]})}),(0,s.jsx)(c.default,{})]})}},6821:(e,r,t)=>{"use strict";t.d(r,{default:()=>d});var s=t(5155),a=t(6874),l=t.n(a),c=t(6766);function d(){return(0,s.jsx)("footer",{className:"bg-[var(--bg-primary)] text-[var(--text-primary)] py-16 px-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,s.jsxs)("div",{className:"col-span-1 md:col-span-1",children:[(0,s.jsx)(l(),{href:"/",className:"inline-block mb-4",children:(0,s.jsx)(c.default,{src:"https://ext.same-assets.com/715601384/683049629.png",alt:"QuackAI",width:120,height:30,className:"mb-4"})}),(0,s.jsx)("p",{className:"text-sm text-[var(--text-secondary)] mb-4",children:"基于酒馆(SillyTavern)的AI角色扮演平台，提供免搭建酒馆，同时提供轻享版角色互动"}),(0,s.jsx)("div",{className:"flex space-x-4",children:(0,s.jsx)(l(),{href:"https://discord.gg/RBDVwJdFh3",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--text-primary)] hover:text-[var(--text-secondary)]",children:(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"})})})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-4",children:"产品"}),(0,s.jsxs)("ul",{className:"space-y-2",children:[(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"#",className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:"酒馆 | STUDIO"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"#",className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:"聊天 | CHAT"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"#",className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:"酒馆 | SILLYTAVERN"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-4",children:"资源"}),(0,s.jsxs)("ul",{className:"space-y-2",children:[(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"#",className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:"API KEY"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"#",className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:"使用说明"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"#",className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:"教程计划"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-4",children:"关于"}),(0,s.jsxs)("ul",{className:"space-y-2",children:[(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"https://discord.gg/RBDVwJdFh3",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:"加入社区"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"#",className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:"在线地址"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"#",className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:"福利领取"})})]})]})]}),(0,s.jsx)("div",{className:"border-t border-[var(--border-color)] mt-12 pt-8 text-center text-sm text-[var(--text-secondary)]",children:(0,s.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," QuackAI. All rights reserved."]})})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[951,320,428,702,500,698,613,917,441,684,358],()=>r(1876)),_N_E=e.O()}]);