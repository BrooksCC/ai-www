(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{229:(e,t,r)=>{"use strict";r.d(t,{AuthGuard:()=>d});var o=r(5155),a=r(2115),n=r(5695),s=r(2045),i=r(1795);let l=["/profile","/chat","/character/dialogue"],d=e=>{let{children:t}=e,r=(0,n.useRouter)(),d=(0,n.usePathname)(),c=(0,s.G)(i.Kc);return(0,a.useEffect)(()=>{l.some(e=>d===e||d.startsWith("".concat(e,"/")))&&!c&&r.replace("/?auth=required")},[c,d,r]),(0,o.jsx)(o.Fragment,{children:t})}},347:()=>{},1183:(e,t,r)=>{"use strict";r.d(t,{BV:()=>i,E4:()=>s,In:()=>d,J1:()=>n,Kp:()=>l});var o=r(8924);let a=e=>e.invitation,n=(0,o.Mz)([a],e=>e.invitationCode),s=(0,o.Mz)([a],e=>e.commissionRecords),i=(0,o.Mz)([a],e=>e.comprehensiveData),l=(0,o.Mz)([a],e=>e.loading),d=(0,o.Mz)([a],e=>e.error);(0,o.Mz)([l],e=>e.generateCode),(0,o.Mz)([l],e=>e.getComprehensiveData),(0,o.Mz)([l],e=>e.getCommissionRecords),(0,o.Mz)([d],e=>e.generateCode),(0,o.Mz)([d],e=>e.getComprehensiveData),(0,o.Mz)([d],e=>e.getCommissionRecords)},1630:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.t.bind(r,8346,23)),Promise.resolve().then(r.bind(r,229)),Promise.resolve().then(r.bind(r,5298)),Promise.resolve().then(r.bind(r,9879)),Promise.resolve().then(r.bind(r,3875))},3875:(e,t,r)=>{"use strict";r.d(t,{ReduxProvider:()=>R});var o=r(5155),a=r(2115),n=r(4540),s=r(52),i=r(6439);let l=(0,i.Z0)({name:"app",initialState:{isLoading:!1,error:null,model:{models:[],modelGroups:[],status:"idle",error:null}},reducers:{setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},clearError:e=>{e.error=null}}}),{setLoading:d,setError:c,clearError:m}=l.actions,u=l.reducer;var h=r(5844);r(6525);let g=(0,s.HY)({app:u,model:h.A});var p=r(179);r(2163),r(8613);let v=p.Ay;r(2847),r(5055);var y=r(3525);r(3500),r(298),r(971);var C=r(8578),f=r(9751);r(7464),r(1183),r(7817),f.uJ,f.f3;var b=r(6828);let x={key:"user_state",paths:["user.currentUser","user.isAuthenticated","user.settings","user.token"],whitelist:["user/"]},w=(0,b.J)(x),k=(0,s.HY)({app:g,user:v,character:y.Ay,chat:C.Ay,invitation:f.Ay}),E=(0,b.X)(x.key),S=(0,i.U1)({reducer:k,middleware:e=>e({serializableCheck:!1}).concat([w]),preloadedState:E||void 0});var D=r(6168);let A=(e,t)=>{if(!e)return void console.error("[axios-interceptor] Axios instance is not available in SDKService.");e.interceptors.response.use(e=>e,e=>{var r;return(null==(r=e.response)?void 0:r.status)===401&&(console.warn("[axios-interceptor] Received 401 Unauthorized, dispatching logout."),t.dispatch((0,p.ri)())),Promise.reject(e)}),console.log("[axios-interceptor] Axios interceptor setup complete.")},T=!1,R=e=>{let{children:t}=e,[r,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{s(!0),T||(console.log("[StoreProvider] Setting up Axios interceptor..."),A(D.o.getAxiosInstance(),S),T=!0)},[]),(0,o.jsx)(o.Fragment,{children:r?(0,o.jsx)(n.Kq,{store:S,children:t}):(0,o.jsx)(n.Kq,{store:S,children:(0,o.jsx)("div",{style:{visibility:"hidden"},children:t})})})}},5844:(e,t,r)=>{"use strict";r.d(t,{A:()=>g,Z:()=>u});var o=r(6439),a=r(9249),n=r(6168),s=r(3299);class i{async getModels(){try{return(await n.o.models.getModels()).data}catch(e){throw console.error("Failed to get models:",e),e}}}let l=new(i=(0,a.Cg)([s.A.Singleton],i)),d={max:{title:"Max系列: 极限性能，极致体验",description:"",sortOrder:1},xl:{title:"XL系列: 均衡性价比，优良体验",description:"",sortOrder:2},turbo:{title:"Turbo: 快速响应，经久耐用",description:"",sortOrder:3},medium:{title:"Medium: 稳定可靠，性价比优",description:"",sortOrder:4},legacy:{title:"Legacy: 经典模型，休闲首选",description:"",sortOrder:5}},c=e=>e.includes("max")?"max":e.includes("xl")?"xl":e.includes("turbo")?"turbo":e.includes("medium")?"medium":"legacy",m=e=>e.includes("max")||e.includes("xl")?"bg-primary":e.includes("turbo")?"bg-secondary":(e.includes("medium"),"bg-accent"),u=(0,o.zD)("model/fetchModels",async()=>(await l.getModels()).models),h=e=>{let t={};return Object.keys(d).forEach(e=>{t[e]=[]}),e.forEach(e=>{let r=c(e.id);t[r]&&t[r].push({id:e.id,name:e.name,description:"string"==typeof e.description?e.description:"适合各种AI对话场景",icon:m(e.id),price:"".concat(e.outputPricePerK,"规范/1K tokens"),contextLength:e.contextLength,freeQuota:e.pointsPerMessage?50:void 0})}),Object.entries(t).filter(e=>{let[t,r]=e;return r.length>0}).map(e=>{let[t,r]=e;return{title:d[t].title,description:d[t].description,sortOrder:d[t].sortOrder,models:r}}).sort((e,t)=>e.sortOrder-t.sortOrder)},g=(0,o.Z0)({name:"model",initialState:{models:[],modelGroups:[],status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(u.pending,e=>{e.status="loading"}).addCase(u.fulfilled,(e,t)=>{e.status="succeeded",e.models=t.payload,e.modelGroups=h(t.payload)}).addCase(u.rejected,(e,t)=>{e.status="failed",e.error=t.error.message||null})}}).reducer},6525:(e,t,r)=>{"use strict";r.d(t,{OD:()=>n,st:()=>s});var o=r(8924);let a=e=>e.app.model,n=e=>a(e).modelGroups,s=e=>a(e).status;(0,o.Mz)([e=>a(e).models,(e,t)=>t],(e,t)=>e.find(e=>e.id===t)||null)},7464:(e,t,r)=>{"use strict";r.d(t,{w1:()=>c,CA:()=>m,kZ:()=>u});var o=r(6439),a=r(9249),n=r(6168),s=r(3299);class i{async generateInvitationCode(e){try{return(await n.o.invitation.generateInvitationCode({generateCodeRequestDto:e})).data}catch(e){throw console.error("Failed to generate invitation code:",e),e}}async getCommissionRecords(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return(await n.o.invitation.getCommissionRecords({page:e,limit:t,...r})).data}catch(e){throw console.error("Failed to get commission records:",e),e}}async getComprehensiveInviteData(){try{return(await n.o.invitation.getComprehensiveInviteData()).data}catch(e){throw console.error("Failed to get comprehensive invite data:",e),e}}}let l=new(i=(0,a.Cg)([s.A.Singleton],i)),d="invitation",c=(0,o.zD)("".concat(d,"/generateCode"),async(e,t)=>{let{rejectWithValue:r}=t;try{return await l.generateInvitationCode(e.codeData)}catch(e){return r(e instanceof Error?e.message:"Failed to generate invitation code")}}),m=(0,o.zD)("".concat(d,"/getCommissionRecords"),async(e,t)=>{let{rejectWithValue:r}=t;try{let t="object"==typeof e&&(null==e?void 0:e.page)?e.page:1,r="object"==typeof e&&(null==e?void 0:e.limit)?e.limit:10,o={type:"object"==typeof e&&(null==e?void 0:e.type)?e.type:void 0,startDate:"object"==typeof e&&(null==e?void 0:e.startDate)?e.startDate:void 0,endDate:"object"==typeof e&&(null==e?void 0:e.endDate)?e.endDate:void 0};return await l.getCommissionRecords(t,r,o)}catch(e){return r(e instanceof Error?e.message:"Failed to get commission records")}}),u=(0,o.zD)("".concat(d,"/getComprehensiveInviteData"),async(e,t)=>{let{rejectWithValue:r}=t;try{return await l.getComprehensiveInviteData()}catch(e){return r(e instanceof Error?e.message:"Failed to get comprehensive invite data")}})},7817:(e,t,r)=>{"use strict";r.d(t,{d:()=>l});var o=r(2115),a=r(2045),n=r(1183),s=r(7464),i=r(9751);let l=()=>{let e=(0,a.j)(),t=(0,a.G)(n.J1),r=(0,a.G)(n.E4),l=(0,a.G)(n.BV),d=(0,a.G)(n.Kp),c=(0,a.G)(n.In),m=(0,o.useCallback)(t=>e((0,s.w1)(t)),[e]),u=(0,o.useCallback)(t=>{e((0,s.CA)(t))},[e]);return{invitationCode:t,commissionRecords:r,comprehensiveData:l,loading:d,error:c,generateCode:m,fetchCommissionRecords:u,fetchComprehensiveData:(0,o.useCallback)(()=>{e((0,s.kZ)())},[e]),clearError:(0,o.useCallback)(t=>{e((0,i.f3)(t))},[e])}}},8346:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78"}},9751:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,f3:()=>l,uJ:()=>i});var o=r(6439),a=r(7464);let n={invitationCode:null,commissionRecords:null,comprehensiveData:null,loading:{generateCode:!1,getCommissionRecords:!1,getComprehensiveData:!1},error:{generateCode:null,getCommissionRecords:null,getComprehensiveData:null}},s=(0,o.Z0)({name:"invitation",initialState:n,reducers:{clearInvitationState:()=>n,clearInvitationError:(e,t)=>{e.error[t.payload]=null}},extraReducers:e=>{e.addCase(a.w1.pending,e=>{e.loading.generateCode=!0,e.error.generateCode=null}).addCase(a.w1.fulfilled,(e,t)=>{e.loading.generateCode=!1,e.invitationCode=t.payload}).addCase(a.w1.rejected,(e,t)=>{e.loading.generateCode=!1,e.error.generateCode=t.payload||"Unknown error"}),e.addCase(a.CA.pending,e=>{e.loading.getCommissionRecords=!0,e.error.getCommissionRecords=null}).addCase(a.CA.fulfilled,(e,t)=>{e.loading.getCommissionRecords=!1,e.commissionRecords=t.payload}).addCase(a.CA.rejected,(e,t)=>{e.loading.getCommissionRecords=!1,e.error.getCommissionRecords=t.payload||"Unknown error"}),e.addCase(a.kZ.pending,e=>{e.loading.getComprehensiveData=!0,e.error.getComprehensiveData=null}).addCase(a.kZ.fulfilled,(e,t)=>{e.loading.getComprehensiveData=!1,e.comprehensiveData=t.payload}).addCase(a.kZ.rejected,(e,t)=>{e.loading.getComprehensiveData=!1,e.error.getComprehensiveData=t.payload||"Unknown error"})}}),{clearInvitationState:i,clearInvitationError:l}=s.actions,d=s.reducer},9879:(e,t,r)=>{"use strict";r.d(t,{ThemeProvider:()=>b,D:()=>c});var o=r(5155),a=r(2115),n=(e,t,r,o,a,n,s,i)=>{let l=document.documentElement,d=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,o=r&&n?a.map(e=>n[e]||e):a;r?(l.classList.remove(...o),l.classList.add(n&&n[t]?n[t]:t)):l.setAttribute(e,t)}),r=t,i&&d.includes(r)&&(l.style.colorScheme=r)}if(o)c(o);else try{let e=localStorage.getItem(t)||r,o=s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(o)}catch(e){}},s=["light","dark"],i="(prefers-color-scheme: dark)",l=a.createContext(void 0),d={setTheme:e=>{},themes:[]},c=()=>{var e;return null!=(e=a.useContext(l))?e:d},m=e=>a.useContext(l)?a.createElement(a.Fragment,null,e.children):a.createElement(h,{...e}),u=["light","dark"],h=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:o=!0,enableColorScheme:n=!0,storageKey:d="theme",themes:c=u,defaultTheme:m=o?"system":"light",attribute:h="data-theme",value:C,children:f,nonce:b,scriptProps:x}=e,[w,k]=a.useState(()=>p(d,m)),[E,S]=a.useState(()=>"system"===w?y():w),D=C?Object.values(C):c,A=a.useCallback(e=>{let t=e;if(!t)return;"system"===e&&o&&(t=y());let a=C?C[t]:t,i=r?v(b):null,l=document.documentElement,d=e=>{"class"===e?(l.classList.remove(...D),a&&l.classList.add(a)):e.startsWith("data-")&&(a?l.setAttribute(e,a):l.removeAttribute(e))};if(Array.isArray(h)?h.forEach(d):d(h),n){let e=s.includes(m)?m:null,r=s.includes(t)?t:e;l.style.colorScheme=r}null==i||i()},[b]),T=a.useCallback(e=>{let t="function"==typeof e?e(w):e;k(t);try{localStorage.setItem(d,t)}catch(e){}},[w]),R=a.useCallback(e=>{S(y(e)),"system"===w&&o&&!t&&A("system")},[w,t]);a.useEffect(()=>{let e=window.matchMedia(i);return e.addListener(R),R(e),()=>e.removeListener(R)},[R]),a.useEffect(()=>{let e=e=>{e.key===d&&(e.newValue?k(e.newValue):T(m))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[T]),a.useEffect(()=>{A(null!=t?t:w)},[t,w]);let M=a.useMemo(()=>({theme:w,setTheme:T,forcedTheme:t,resolvedTheme:"system"===w?E:w,themes:o?[...c,"system"]:c,systemTheme:o?E:void 0}),[w,T,t,E,o,c]);return a.createElement(l.Provider,{value:M},a.createElement(g,{forcedTheme:t,storageKey:d,attribute:h,enableSystem:o,enableColorScheme:n,defaultTheme:m,value:C,themes:c,nonce:b,scriptProps:x}),f)},g=a.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:o,enableSystem:s,enableColorScheme:i,defaultTheme:l,value:d,themes:c,nonce:m,scriptProps:u}=e,h=JSON.stringify([o,r,l,t,c,d,s,i]).slice(1,-1);return a.createElement("script",{...u,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(n.toString(),")(").concat(h,")")}})}),p=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},v=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},y=e=>(e||(e=window.matchMedia(i)),e.matches?"dark":"light"),C=r(8613);let f=["dark","light","pink","system"];function b(e){let{children:t}=e,{themeSetting:r,updateSettings:a}=(0,C.Qg)();return(0,o.jsx)(m,{attribute:"class",defaultTheme:"dark",enableSystem:!1,themes:f,children:(0,o.jsx)(x,{initialThemeSetting:r,updateSettings:a,children:t})})}function x(e){let{initialThemeSetting:t,updateSettings:r,children:n}=e,{setTheme:s,theme:i,resolvedTheme:l}=c(),[d,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(t);return(0,a.useEffect)(()=>{m(!0)},[]),(0,a.useEffect)(()=>{if(d&&t&&t!==l){let e=t;f.includes(e)||(console.warn('[ThemeProvider] Invalid initial theme "'.concat(e,'" from Redux, defaulting to dark.')),e="dark"),console.log("[ThemeProvider] Initial sync Redux (".concat(e,") -> next-themes.")),s(e)}},[d,t,l,s]),(0,a.useEffect)(()=>{d&&l&&l!==u&&f.includes(l)&&(console.log("[ThemeProvider] Sync next-themes (".concat(l,") -> Redux.")),r({theme:l}).then(e=>{e?h(l):console.error("[ThemeProvider] Failed to sync theme to Redux.")}))},[d,l,u,r,s]),(0,a.useEffect)(()=>{d&&t!==u&&(console.log("[ThemeProvider] Redux state changed externally to: ".concat(t,". Updating tracker.")),h(t))},[d,t,u,l,s]),(0,a.useEffect)(()=>{d&&console.log("[ThemeProvider] Current theme state:",{reduxTheme:u,nextThemesTheme:i,nextThemesResolved:l,bodyClass:document.body.className})},[d,u,i,l]),(0,o.jsx)(o.Fragment,{children:n})}}},e=>{var t=t=>e(e.s=t);e.O(0,[600,951,320,428,702,500,698,613,917,441,684,358],()=>t(1630)),_N_E=e.O()}]);