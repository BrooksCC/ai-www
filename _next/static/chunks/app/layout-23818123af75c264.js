(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{229:(e,t,r)=>{"use strict";r.d(t,{AuthGuard:()=>d});var n=r(5155),o=r(2115),a=r(5695),s=r(2045),i=r(1795);let l=["/profile","/chat","/character/dialogue"],d=e=>{let{children:t}=e,r=(0,a.useRouter)(),d=(0,a.usePathname)(),c=(0,s.G)(i.Kc);return(0,o.useEffect)(()=>{l.some(e=>d===e||d.startsWith("".concat(e,"/")))&&!c&&r.replace("/?auth=required")},[c,d,r]),(0,n.jsx)(n.Fragment,{children:t})}},255:(e,t,r)=>{"use strict";function n(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return n}}),r(5155),r(7650),r(5744),r(589)},347:()=>{},1183:(e,t,r)=>{"use strict";r.d(t,{BV:()=>i,E4:()=>s,In:()=>d,J1:()=>a,Kp:()=>l});var n=r(8924);let o=e=>e.invitation,a=(0,n.Mz)([o],e=>e.invitationCode),s=(0,n.Mz)([o],e=>e.commissionRecords),i=(0,n.Mz)([o],e=>e.comprehensiveData),l=(0,n.Mz)([o],e=>e.loading),d=(0,n.Mz)([o],e=>e.error);(0,n.Mz)([l],e=>e.generateCode),(0,n.Mz)([l],e=>e.getComprehensiveData),(0,n.Mz)([l],e=>e.getCommissionRecords),(0,n.Mz)([d],e=>e.generateCode),(0,n.Mz)([d],e=>e.getComprehensiveData),(0,n.Mz)([d],e=>e.getCommissionRecords)},2146:(e,t,r)=>{"use strict";function n(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}}),r(5262)},3428:(e,t,r)=>{"use strict";r.d(t,{default:()=>n}),r(5155),(0,r(5028).default)(()=>Promise.resolve(()=>null),{loadableGenerated:{webpack:()=>[null]},ssr:!1});let n=()=>null},3875:(e,t,r)=>{"use strict";r.d(t,{ReduxProvider:()=>A});var n=r(5155),o=r(2115),a=r(4540),s=r(52),i=r(6439);let l=(0,i.Z0)({name:"app",initialState:{isLoading:!1,error:null,model:{models:[],modelGroups:[],selectedModel:null,status:"idle",error:null}},reducers:{setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},clearError:e=>{e.error=null}}}),{setLoading:d,setError:c,clearError:u}=l.actions,m=l.reducer;var g=r(5844);r(6525);let h=(0,s.HY)({app:m,model:g.Ay});var p=r(179);r(3178),r(8613);let f=p.Ay;r(2847),r(5055);var v=r(3525);r(3500),r(298),r(971);var y=r(8578),b=r(9751);r(7464),r(1183),r(7817),b.uJ,b.f3;var C=r(6828);let x={key:"user_state",paths:["user.currentUser","user.isAuthenticated","user.settings","user.token"],whitelist:["user/"]},w=(0,C.J)(x),S=(0,s.HY)({app:h,user:f,character:v.Ay,chat:y.Ay,invitation:b.Ay}),k=(0,C.X)(x.key),j=(0,i.U1)({reducer:S,middleware:e=>e({serializableCheck:!1}).concat([w]),preloadedState:k||void 0});var P=r(6168);let E=(e,t)=>{if(!e)return void console.error("[axios-interceptor] Axios instance is not available in SDKService.");e.interceptors.response.use(e=>e,e=>{var r;return(null==(r=e.response)?void 0:r.status)===401&&(console.warn("[axios-interceptor] Received 401 Unauthorized, dispatching logout."),t.dispatch((0,p.ri)())),Promise.reject(e)}),console.log("[axios-interceptor] Axios interceptor setup complete.")},M=!1,A=e=>{let{children:t}=e,[r,s]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{s(!0),M||(console.log("[StoreProvider] Setting up Axios interceptor..."),E(P.o.getAxiosInstance(),j),M=!0)},[]),(0,n.jsx)(n.Fragment,{children:r?(0,n.jsx)(a.Kq,{store:j,children:t}):(0,n.jsx)(a.Kq,{store:j,children:(0,n.jsx)("div",{style:{visibility:"hidden"},children:t})})})}},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return s},createAsyncLocalStorage:function(){return a},createSnapshot:function(){return i}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class n{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let o="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function a(){return o?new o:new n}function s(e){return o?o.bind(e):n.bind(e)}function i(){return o?o.snapshot():function(e,...t){return e(...t)}}},5028:(e,t,r)=>{"use strict";r.d(t,{default:()=>o.a});var n=r(6645),o=r.n(n)},5744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return n.workAsyncStorageInstance}});let n=r(7828)},5844:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>f,ZC:()=>m,xH:()=>p});var n=r(6439),o=r(9249),a=r(6168),s=r(3299);class i{async getModels(){try{return(await a.o.models.getModels()).data}catch(e){throw console.error("Failed to get models:",e),e}}}let l=new(i=(0,o.Cg)([s.A.Singleton],i)),d={max:{title:"Max系列: 极限性能，极致体验",description:"",sortOrder:1},xl:{title:"XL系列: 均衡性价比，优良体验",description:"",sortOrder:2},turbo:{title:"Turbo: 快速响应，经久耐用",description:"",sortOrder:3},medium:{title:"Medium: 稳定可靠，性价比优",description:"",sortOrder:4},legacy:{title:"Legacy: 经典模型，休闲首选",description:"",sortOrder:5}},c=e=>e.includes("max")?"max":e.includes("xl")?"xl":e.includes("turbo")?"turbo":e.includes("medium")?"medium":"legacy",u=e=>e.includes("max")||e.includes("xl")?"bg-primary":e.includes("turbo")?"bg-secondary":(e.includes("medium"),"bg-accent"),m=(0,n.zD)("model/fetchModels",async()=>(await l.getModels()).models),g=e=>{let t={};return Object.keys(d).forEach(e=>{t[e]=[]}),e.forEach(e=>{let r=c(e.id);t[r]&&t[r].push({id:e.id,name:e.name,description:"string"==typeof e.description?e.description:"适合各种AI对话场景",icon:u(e.id),price:e.pricings&&e.pricings.length>0?"".concat(e.pricings[0].outputPricePerK,"规范/1K tokens"):"价格待定",contextLength:e.contextLength,freeQuota:e.pointsPerMessage?50:void 0})}),Object.entries(t).filter(e=>{let[t,r]=e;return r.length>0}).map(e=>{let[t,r]=e;return{title:d[t].title,description:d[t].description,sortOrder:d[t].sortOrder,models:r}}).sort((e,t)=>e.sortOrder-t.sortOrder)},h=(0,n.Z0)({name:"model",initialState:{models:[],modelGroups:[],selectedModel:null,status:"idle",error:null},reducers:{setSelectedModel:(e,t)=>{e.selectedModel=t.payload}},extraReducers:e=>{e.addCase(m.pending,e=>{e.status="loading"}).addCase(m.fulfilled,(e,t)=>{if(e.status="succeeded",e.models=t.payload,e.modelGroups=g(t.payload),!e.selectedModel&&e.modelGroups.length>0){let t=e.modelGroups.find(e=>e.title.includes("XL"));t&&t.models.length>0?e.selectedModel=t.models[t.models.length-1]:e.modelGroups[0].models.length>0&&(e.selectedModel=e.modelGroups[0].models[0])}}).addCase(m.rejected,(e,t)=>{e.status="failed",e.error=t.error.message||null})}}),{setSelectedModel:p}=h.actions,f=h.reducer},6525:(e,t,r)=>{"use strict";r.d(t,{OD:()=>a,rN:()=>s,st:()=>i});var n=r(8924);let o=e=>e.app.model,a=e=>o(e).modelGroups,s=e=>o(e).selectedModel,i=e=>o(e).status;(0,n.Mz)([e=>o(e).models,(e,t)=>t],(e,t)=>e.find(e=>e.id===t)||null)},6645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let n=r(8466)._(r(7357));function o(e,t){var r;let o={};"function"==typeof e&&(o.loader=e);let a={...o,...t};return(0,n.default)({...a,modules:null==(r=a.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6668:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.t.bind(r,8346,23)),Promise.resolve().then(r.bind(r,229)),Promise.resolve().then(r.bind(r,5298)),Promise.resolve().then(r.bind(r,3428)),Promise.resolve().then(r.bind(r,9879)),Promise.resolve().then(r.bind(r,3875))},7357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let n=r(5155),o=r(2115),a=r(2146);function s(e){return{default:e&&"default"in e?e.default:e}}r(255);let i={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},l=function(e){let t={...i,...e},r=(0,o.lazy)(()=>t.loader().then(s)),l=t.loading;function d(e){let s=l?(0,n.jsx)(l,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,d=i?o.Suspense:o.Fragment,c=t.ssr?(0,n.jsxs)(n.Fragment,{children:[null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(d,{...i?{fallback:s}:{},children:c})}return d.displayName="LoadableComponent",d}},7464:(e,t,r)=>{"use strict";r.d(t,{w1:()=>c,CA:()=>u,kZ:()=>m});var n=r(6439),o=r(9249),a=r(6168),s=r(3299);class i{async generateInvitationCode(e){try{return(await a.o.invitation.generateInvitationCode({generateCodeRequestDto:e})).data}catch(e){throw console.error("Failed to generate invitation code:",e),e}}async getCommissionRecords(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return(await a.o.invitation.getCommissionRecords({page:e,limit:t,...r})).data}catch(e){throw console.error("Failed to get commission records:",e),e}}async getComprehensiveInviteData(){try{return(await a.o.invitation.getComprehensiveInviteData()).data}catch(e){throw console.error("Failed to get comprehensive invite data:",e),e}}}let l=new(i=(0,o.Cg)([s.A.Singleton],i)),d="invitation",c=(0,n.zD)("".concat(d,"/generateCode"),async(e,t)=>{let{rejectWithValue:r}=t;try{return await l.generateInvitationCode(e.codeData)}catch(e){return r(e instanceof Error?e.message:"Failed to generate invitation code")}}),u=(0,n.zD)("".concat(d,"/getCommissionRecords"),async(e,t)=>{let{rejectWithValue:r}=t;try{let t="object"==typeof e&&(null==e?void 0:e.page)?e.page:1,r="object"==typeof e&&(null==e?void 0:e.limit)?e.limit:10,n={type:"object"==typeof e&&(null==e?void 0:e.type)?e.type:void 0,startDate:"object"==typeof e&&(null==e?void 0:e.startDate)?e.startDate:void 0,endDate:"object"==typeof e&&(null==e?void 0:e.endDate)?e.endDate:void 0};return await l.getCommissionRecords(t,r,n)}catch(e){return r(e instanceof Error?e.message:"Failed to get commission records")}}),m=(0,n.zD)("".concat(d,"/getComprehensiveInviteData"),async(e,t)=>{let{rejectWithValue:r}=t;try{return await l.getComprehensiveInviteData()}catch(e){return r(e instanceof Error?e.message:"Failed to get comprehensive invite data")}})},7817:(e,t,r)=>{"use strict";r.d(t,{d:()=>l});var n=r(2115),o=r(2045),a=r(1183),s=r(7464),i=r(9751);let l=()=>{let e=(0,o.j)(),t=(0,o.G)(a.J1),r=(0,o.G)(a.E4),l=(0,o.G)(a.BV),d=(0,o.G)(a.Kp),c=(0,o.G)(a.In),u=(0,n.useCallback)(t=>e((0,s.w1)(t)),[e]),m=(0,n.useCallback)(t=>{e((0,s.CA)(t))},[e]);return{invitationCode:t,commissionRecords:r,comprehensiveData:l,loading:d,error:c,generateCode:u,fetchCommissionRecords:m,fetchComprehensiveData:(0,n.useCallback)(()=>{e((0,s.kZ)())},[e]),clearError:(0,n.useCallback)(t=>{e((0,i.f3)(t))},[e])}}},7828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return n}});let n=(0,r(4054).createAsyncLocalStorage)()},8346:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78"}},9751:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,f3:()=>l,uJ:()=>i});var n=r(6439),o=r(7464);let a={invitationCode:null,commissionRecords:null,comprehensiveData:null,loading:{generateCode:!1,getCommissionRecords:!1,getComprehensiveData:!1},error:{generateCode:null,getCommissionRecords:null,getComprehensiveData:null}},s=(0,n.Z0)({name:"invitation",initialState:a,reducers:{clearInvitationState:()=>a,clearInvitationError:(e,t)=>{e.error[t.payload]=null}},extraReducers:e=>{e.addCase(o.w1.pending,e=>{e.loading.generateCode=!0,e.error.generateCode=null}).addCase(o.w1.fulfilled,(e,t)=>{e.loading.generateCode=!1,e.invitationCode=t.payload}).addCase(o.w1.rejected,(e,t)=>{e.loading.generateCode=!1,e.error.generateCode=t.payload||"Unknown error"}),e.addCase(o.CA.pending,e=>{e.loading.getCommissionRecords=!0,e.error.getCommissionRecords=null}).addCase(o.CA.fulfilled,(e,t)=>{e.loading.getCommissionRecords=!1,e.commissionRecords=t.payload}).addCase(o.CA.rejected,(e,t)=>{e.loading.getCommissionRecords=!1,e.error.getCommissionRecords=t.payload||"Unknown error"}),e.addCase(o.kZ.pending,e=>{e.loading.getComprehensiveData=!0,e.error.getComprehensiveData=null}).addCase(o.kZ.fulfilled,(e,t)=>{e.loading.getComprehensiveData=!1,e.comprehensiveData=t.payload}).addCase(o.kZ.rejected,(e,t)=>{e.loading.getComprehensiveData=!1,e.error.getComprehensiveData=t.payload||"Unknown error"})}}),{clearInvitationState:i,clearInvitationError:l}=s.actions,d=s.reducer},9879:(e,t,r)=>{"use strict";r.d(t,{ThemeProvider:()=>C,D:()=>c});var n=r(5155),o=r(2115),a=(e,t,r,n,o,a,s,i)=>{let l=document.documentElement,d=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&a?o.map(e=>a[e]||e):o;r?(l.classList.remove(...n),l.classList.add(a&&a[t]?a[t]:t)):l.setAttribute(e,t)}),r=t,i&&d.includes(r)&&(l.style.colorScheme=r)}if(n)c(n);else try{let e=localStorage.getItem(t)||r,n=s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}},s=["light","dark"],i="(prefers-color-scheme: dark)",l=o.createContext(void 0),d={setTheme:e=>{},themes:[]},c=()=>{var e;return null!=(e=o.useContext(l))?e:d},u=e=>o.useContext(l)?o.createElement(o.Fragment,null,e.children):o.createElement(g,{...e}),m=["light","dark"],g=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:n=!0,enableColorScheme:a=!0,storageKey:d="theme",themes:c=m,defaultTheme:u=n?"system":"light",attribute:g="data-theme",value:y,children:b,nonce:C,scriptProps:x}=e,[w,S]=o.useState(()=>p(d,u)),[k,j]=o.useState(()=>"system"===w?v():w),P=y?Object.values(y):c,E=o.useCallback(e=>{let t=e;if(!t)return;"system"===e&&n&&(t=v());let o=y?y[t]:t,i=r?f(C):null,l=document.documentElement,d=e=>{"class"===e?(l.classList.remove(...P),o&&l.classList.add(o)):e.startsWith("data-")&&(o?l.setAttribute(e,o):l.removeAttribute(e))};if(Array.isArray(g)?g.forEach(d):d(g),a){let e=s.includes(u)?u:null,r=s.includes(t)?t:e;l.style.colorScheme=r}null==i||i()},[C]),M=o.useCallback(e=>{let t="function"==typeof e?e(w):e;S(t);try{localStorage.setItem(d,t)}catch(e){}},[w]),A=o.useCallback(e=>{j(v(e)),"system"===w&&n&&!t&&E("system")},[w,t]);o.useEffect(()=>{let e=window.matchMedia(i);return e.addListener(A),A(e),()=>e.removeListener(A)},[A]),o.useEffect(()=>{let e=e=>{e.key===d&&(e.newValue?S(e.newValue):M(u))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[M]),o.useEffect(()=>{E(null!=t?t:w)},[t,w]);let O=o.useMemo(()=>({theme:w,setTheme:M,forcedTheme:t,resolvedTheme:"system"===w?k:w,themes:n?[...c,"system"]:c,systemTheme:n?k:void 0}),[w,M,t,k,n,c]);return o.createElement(l.Provider,{value:O},o.createElement(h,{forcedTheme:t,storageKey:d,attribute:g,enableSystem:n,enableColorScheme:a,defaultTheme:u,value:y,themes:c,nonce:C,scriptProps:x}),b)},h=o.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:n,enableSystem:s,enableColorScheme:i,defaultTheme:l,value:d,themes:c,nonce:u,scriptProps:m}=e,g=JSON.stringify([n,r,l,t,c,d,s,i]).slice(1,-1);return o.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(a.toString(),")(").concat(g,")")}})}),p=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},f=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},v=e=>(e||(e=window.matchMedia(i)),e.matches?"dark":"light"),y=r(8613);let b=["dark","light","pink","system"];function C(e){let{children:t}=e,{themeSetting:r,updateSettings:o}=(0,y.Qg)();return(0,n.jsx)(u,{attribute:"class",defaultTheme:"dark",enableSystem:!1,themes:b,children:(0,n.jsx)(x,{initialThemeSetting:r,updateSettings:o,children:t})})}function x(e){let{initialThemeSetting:t,updateSettings:r,children:a}=e,{setTheme:s,theme:i,resolvedTheme:l}=c(),[d,u]=(0,o.useState)(!1),[m,g]=(0,o.useState)(t);return(0,o.useEffect)(()=>{u(!0)},[]),(0,o.useEffect)(()=>{if(d&&t&&t!==l){let e=t;b.includes(e)||(console.warn('[ThemeProvider] Invalid initial theme "'.concat(e,'" from Redux, defaulting to dark.')),e="dark"),console.log("[ThemeProvider] Initial sync Redux (".concat(e,") -> next-themes.")),s(e)}},[d,t,l,s]),(0,o.useEffect)(()=>{d&&l&&l!==m&&b.includes(l)&&(console.log("[ThemeProvider] Sync next-themes (".concat(l,") -> Redux.")),r({theme:l}).then(e=>{e?g(l):console.error("[ThemeProvider] Failed to sync theme to Redux.")}))},[d,l,m,r,s]),(0,o.useEffect)(()=>{d&&t!==m&&(console.log("[ThemeProvider] Redux state changed externally to: ".concat(t,". Updating tracker.")),g(t))},[d,t,m,l,s]),(0,o.useEffect)(()=>{d&&console.log("[ThemeProvider] Current theme state:",{reduxTheme:m,nextThemesTheme:i,nextThemesResolved:l,bodyClass:document.body.className})},[d,m,i,l]),(0,n.jsx)(n.Fragment,{children:a})}}},e=>{var t=t=>e(e.s=t);e.O(0,[600,951,320,105,428,116,500,476,613,118,917,441,684,358],()=>t(6668)),_N_E=e.O()}]);