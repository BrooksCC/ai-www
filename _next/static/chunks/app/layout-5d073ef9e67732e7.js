(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{229:(e,t,r)=>{"use strict";r.d(t,{AuthGuard:()=>c});var o=r(5155),a=r(2115),n=r(5695),s=r(2045),i=r(1795);let l=["/profile","/chat","/character/dialogue"],c=e=>{let{children:t}=e,r=(0,n.useRouter)(),c=(0,n.usePathname)(),d=(0,s.G)(i.Kc);return(0,a.useEffect)(()=>{l.some(e=>c===e||c.startsWith("".concat(e,"/")))&&!d&&r.replace("/?auth=required")},[d,c,r]),(0,o.jsx)(o.Fragment,{children:t})}},347:()=>{},1183:(e,t,r)=>{"use strict";r.d(t,{BV:()=>i,E4:()=>s,In:()=>c,J1:()=>n,Kp:()=>l});var o=r(8924);let a=e=>e.invitation,n=(0,o.Mz)([a],e=>e.invitationCode),s=(0,o.Mz)([a],e=>e.commissionRecords),i=(0,o.Mz)([a],e=>e.comprehensiveData),l=(0,o.Mz)([a],e=>e.loading),c=(0,o.Mz)([a],e=>e.error);(0,o.Mz)([l],e=>e.generateCode),(0,o.Mz)([l],e=>e.getComprehensiveData),(0,o.Mz)([l],e=>e.getCommissionRecords),(0,o.Mz)([c],e=>e.generateCode),(0,o.Mz)([c],e=>e.getComprehensiveData),(0,o.Mz)([c],e=>e.getCommissionRecords)},1630:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.t.bind(r,8346,23)),Promise.resolve().then(r.bind(r,229)),Promise.resolve().then(r.bind(r,5298)),Promise.resolve().then(r.bind(r,9879)),Promise.resolve().then(r.bind(r,3875))},3875:(e,t,r)=>{"use strict";r.d(t,{ReduxProvider:()=>T});var o=r(5155),a=r(2115),n=r(4540),s=r(52),i=r(6439);let l=(0,i.Z0)({name:"app",initialState:{isLoading:!1,error:null},reducers:{setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},clearError:e=>{e.error=null}}}),{setLoading:c,setError:d,clearError:m}=l.actions,u=l.reducer;var h=r(179);r(2163),r(8613);let g=h.Ay;r(2847),r(5055);var v=r(3525);r(3500),r(298),r(971);var p=r(8578),C=r(9751);r(7464),r(1183),r(7817),C.uJ,C.f3;var y=r(6828);let f={key:"user_state",paths:["user.currentUser","user.isAuthenticated","user.settings","user.token"],whitelist:["user/"]},b=(0,y.J)(f),k=(0,s.HY)({app:u,user:g,character:v.Ay,chat:p.Ay,invitation:C.Ay}),w=(0,y.X)(f.key),E=(0,i.U1)({reducer:k,middleware:e=>e({serializableCheck:!1}).concat([b]),preloadedState:w||void 0});var x=r(6168);let S=(e,t)=>{if(!e)return void console.error("[axios-interceptor] Axios instance is not available in SDKService.");e.interceptors.response.use(e=>e,e=>{var r;return(null==(r=e.response)?void 0:r.status)===401&&(console.warn("[axios-interceptor] Received 401 Unauthorized, dispatching logout."),t.dispatch((0,h.ri)())),Promise.reject(e)}),console.log("[axios-interceptor] Axios interceptor setup complete.")},D=!1,T=e=>{let{children:t}=e,[r,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{s(!0),D||(console.log("[StoreProvider] Setting up Axios interceptor..."),S(x.o.getAxiosInstance(),E),D=!0)},[]),(0,o.jsx)(o.Fragment,{children:r?(0,o.jsx)(n.Kq,{store:E,children:t}):(0,o.jsx)(n.Kq,{store:E,children:(0,o.jsx)("div",{style:{visibility:"hidden"},children:t})})})}},7464:(e,t,r)=>{"use strict";r.d(t,{w1:()=>d,CA:()=>m,kZ:()=>u});var o=r(6439),a=r(9249),n=r(6168),s=r(3299);class i{async generateInvitationCode(e){try{return(await n.o.invitation.generateInvitationCode({generateCodeRequestDto:e})).data}catch(e){throw console.error("Failed to generate invitation code:",e),e}}async getCommissionRecords(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return(await n.o.invitation.getCommissionRecords({page:e,limit:t,...r})).data}catch(e){throw console.error("Failed to get commission records:",e),e}}async getComprehensiveInviteData(){try{return(await n.o.invitation.getComprehensiveInviteData()).data}catch(e){throw console.error("Failed to get comprehensive invite data:",e),e}}}let l=new(i=(0,a.Cg)([s.A.Singleton],i)),c="invitation",d=(0,o.zD)("".concat(c,"/generateCode"),async(e,t)=>{let{rejectWithValue:r}=t;try{return await l.generateInvitationCode(e.codeData)}catch(e){return r(e instanceof Error?e.message:"Failed to generate invitation code")}}),m=(0,o.zD)("".concat(c,"/getCommissionRecords"),async(e,t)=>{let{rejectWithValue:r}=t;try{let t="object"==typeof e&&(null==e?void 0:e.page)?e.page:1,r="object"==typeof e&&(null==e?void 0:e.limit)?e.limit:10,o={type:"object"==typeof e&&(null==e?void 0:e.type)?e.type:void 0,startDate:"object"==typeof e&&(null==e?void 0:e.startDate)?e.startDate:void 0,endDate:"object"==typeof e&&(null==e?void 0:e.endDate)?e.endDate:void 0};return await l.getCommissionRecords(t,r,o)}catch(e){return r(e instanceof Error?e.message:"Failed to get commission records")}}),u=(0,o.zD)("".concat(c,"/getComprehensiveInviteData"),async(e,t)=>{let{rejectWithValue:r}=t;try{return await l.getComprehensiveInviteData()}catch(e){return r(e instanceof Error?e.message:"Failed to get comprehensive invite data")}})},7817:(e,t,r)=>{"use strict";r.d(t,{d:()=>l});var o=r(2115),a=r(2045),n=r(1183),s=r(7464),i=r(9751);let l=()=>{let e=(0,a.j)(),t=(0,a.G)(n.J1),r=(0,a.G)(n.E4),l=(0,a.G)(n.BV),c=(0,a.G)(n.Kp),d=(0,a.G)(n.In),m=(0,o.useCallback)(t=>e((0,s.w1)(t)),[e]),u=(0,o.useCallback)(t=>{e((0,s.CA)(t))},[e]);return{invitationCode:t,commissionRecords:r,comprehensiveData:l,loading:c,error:d,generateCode:m,fetchCommissionRecords:u,fetchComprehensiveData:(0,o.useCallback)(()=>{e((0,s.kZ)())},[e]),clearError:(0,o.useCallback)(t=>{e((0,i.f3)(t))},[e])}}},8346:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78"}},9751:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>c,f3:()=>l,uJ:()=>i});var o=r(6439),a=r(7464);let n={invitationCode:null,commissionRecords:null,comprehensiveData:null,loading:{generateCode:!1,getCommissionRecords:!1,getComprehensiveData:!1},error:{generateCode:null,getCommissionRecords:null,getComprehensiveData:null}},s=(0,o.Z0)({name:"invitation",initialState:n,reducers:{clearInvitationState:()=>n,clearInvitationError:(e,t)=>{e.error[t.payload]=null}},extraReducers:e=>{e.addCase(a.w1.pending,e=>{e.loading.generateCode=!0,e.error.generateCode=null}).addCase(a.w1.fulfilled,(e,t)=>{e.loading.generateCode=!1,e.invitationCode=t.payload}).addCase(a.w1.rejected,(e,t)=>{e.loading.generateCode=!1,e.error.generateCode=t.payload||"Unknown error"}),e.addCase(a.CA.pending,e=>{e.loading.getCommissionRecords=!0,e.error.getCommissionRecords=null}).addCase(a.CA.fulfilled,(e,t)=>{e.loading.getCommissionRecords=!1,e.commissionRecords=t.payload}).addCase(a.CA.rejected,(e,t)=>{e.loading.getCommissionRecords=!1,e.error.getCommissionRecords=t.payload||"Unknown error"}),e.addCase(a.kZ.pending,e=>{e.loading.getComprehensiveData=!0,e.error.getComprehensiveData=null}).addCase(a.kZ.fulfilled,(e,t)=>{e.loading.getComprehensiveData=!1,e.comprehensiveData=t.payload}).addCase(a.kZ.rejected,(e,t)=>{e.loading.getComprehensiveData=!1,e.error.getComprehensiveData=t.payload||"Unknown error"})}}),{clearInvitationState:i,clearInvitationError:l}=s.actions,c=s.reducer},9879:(e,t,r)=>{"use strict";r.d(t,{ThemeProvider:()=>b,D:()=>d});var o=r(5155),a=r(2115),n=(e,t,r,o,a,n,s,i)=>{let l=document.documentElement,c=["light","dark"];function d(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,o=r&&n?a.map(e=>n[e]||e):a;r?(l.classList.remove(...o),l.classList.add(n&&n[t]?n[t]:t)):l.setAttribute(e,t)}),r=t,i&&c.includes(r)&&(l.style.colorScheme=r)}if(o)d(o);else try{let e=localStorage.getItem(t)||r,o=s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;d(o)}catch(e){}},s=["light","dark"],i="(prefers-color-scheme: dark)",l=a.createContext(void 0),c={setTheme:e=>{},themes:[]},d=()=>{var e;return null!=(e=a.useContext(l))?e:c},m=e=>a.useContext(l)?a.createElement(a.Fragment,null,e.children):a.createElement(h,{...e}),u=["light","dark"],h=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:o=!0,enableColorScheme:n=!0,storageKey:c="theme",themes:d=u,defaultTheme:m=o?"system":"light",attribute:h="data-theme",value:y,children:f,nonce:b,scriptProps:k}=e,[w,E]=a.useState(()=>v(c,m)),[x,S]=a.useState(()=>"system"===w?C():w),D=y?Object.values(y):d,T=a.useCallback(e=>{let t=e;if(!t)return;"system"===e&&o&&(t=C());let a=y?y[t]:t,i=r?p(b):null,l=document.documentElement,c=e=>{"class"===e?(l.classList.remove(...D),a&&l.classList.add(a)):e.startsWith("data-")&&(a?l.setAttribute(e,a):l.removeAttribute(e))};if(Array.isArray(h)?h.forEach(c):c(h),n){let e=s.includes(m)?m:null,r=s.includes(t)?t:e;l.style.colorScheme=r}null==i||i()},[b]),R=a.useCallback(e=>{let t="function"==typeof e?e(w):e;E(t);try{localStorage.setItem(c,t)}catch(e){}},[w]),A=a.useCallback(e=>{S(C(e)),"system"===w&&o&&!t&&T("system")},[w,t]);a.useEffect(()=>{let e=window.matchMedia(i);return e.addListener(A),A(e),()=>e.removeListener(A)},[A]),a.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?E(e.newValue):R(m))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[R]),a.useEffect(()=>{T(null!=t?t:w)},[t,w]);let P=a.useMemo(()=>({theme:w,setTheme:R,forcedTheme:t,resolvedTheme:"system"===w?x:w,themes:o?[...d,"system"]:d,systemTheme:o?x:void 0}),[w,R,t,x,o,d]);return a.createElement(l.Provider,{value:P},a.createElement(g,{forcedTheme:t,storageKey:c,attribute:h,enableSystem:o,enableColorScheme:n,defaultTheme:m,value:y,themes:d,nonce:b,scriptProps:k}),f)},g=a.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:o,enableSystem:s,enableColorScheme:i,defaultTheme:l,value:c,themes:d,nonce:m,scriptProps:u}=e,h=JSON.stringify([o,r,l,t,d,c,s,i]).slice(1,-1);return a.createElement("script",{...u,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(n.toString(),")(").concat(h,")")}})}),v=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},p=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},C=e=>(e||(e=window.matchMedia(i)),e.matches?"dark":"light"),y=r(8613);let f=["dark","light","pink","system"];function b(e){let{children:t}=e,{themeSetting:r,updateSettings:a}=(0,y.Qg)();return(0,o.jsx)(m,{attribute:"class",defaultTheme:"dark",enableSystem:!1,themes:f,children:(0,o.jsx)(k,{initialThemeSetting:r,updateSettings:a,children:t})})}function k(e){let{initialThemeSetting:t,updateSettings:r,children:n}=e,{setTheme:s,theme:i,resolvedTheme:l}=d(),[c,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(t);return(0,a.useEffect)(()=>{m(!0)},[]),(0,a.useEffect)(()=>{if(c&&t&&t!==l){let e=t;f.includes(e)||(console.warn('[ThemeProvider] Invalid initial theme "'.concat(e,'" from Redux, defaulting to dark.')),e="dark"),console.log("[ThemeProvider] Initial sync Redux (".concat(e,") -> next-themes.")),s(e)}},[c,t,l,s]),(0,a.useEffect)(()=>{c&&l&&l!==u&&f.includes(l)&&(console.log("[ThemeProvider] Sync next-themes (".concat(l,") -> Redux.")),r({theme:l}).then(e=>{e?h(l):console.error("[ThemeProvider] Failed to sync theme to Redux.")}))},[c,l,u,r,s]),(0,a.useEffect)(()=>{c&&t!==u&&(console.log("[ThemeProvider] Redux state changed externally to: ".concat(t,". Updating tracker.")),h(t))},[c,t,u,l,s]),(0,a.useEffect)(()=>{c&&console.log("[ThemeProvider] Current theme state:",{reduxTheme:u,nextThemesTheme:i,nextThemesResolved:l,bodyClass:document.body.className})},[c,u,i,l]),(0,o.jsx)(o.Fragment,{children:n})}}},e=>{var t=t=>e(e.s=t);e.O(0,[838,951,320,428,702,500,698,613,917,441,684,358],()=>t(1630)),_N_E=e.O()}]);