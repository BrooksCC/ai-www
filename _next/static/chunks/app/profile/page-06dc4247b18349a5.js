(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{1183:(e,t,s)=>{"use strict";s.d(t,{BV:()=>d,E4:()=>i,In:()=>c,J1:()=>l,Kp:()=>n});var a=s(8924);let r=e=>e.invitation,l=(0,a.Mz)([r],e=>e.invitationCode),i=(0,a.Mz)([r],e=>e.commissionRecords),d=(0,a.Mz)([r],e=>e.comprehensiveData),n=(0,a.Mz)([r],e=>e.loading),c=(0,a.Mz)([r],e=>e.error);(0,a.Mz)([n],e=>e.generateCode),(0,a.Mz)([n],e=>e.getComprehensiveData),(0,a.Mz)([n],e=>e.getCommissionRecords),(0,a.Mz)([c],e=>e.generateCode),(0,a.Mz)([c],e=>e.getComprehensiveData),(0,a.Mz)([c],e=>e.getCommissionRecords)},2523:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(5155),r=s(2115),l=s(9434);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border bg-[var(--bg-tertiary)] border-[var(--border-color)] text-[var(--text-primary)] input-focus px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},5590:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ed});var a=s(5155),r=s(2115),l=s(6821),i=s(285),d=s(2045),n=s(1795),c=s(2523),o=s(1394),x=s(157);let m=(0,x.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var h=s(7374),v=s(8613);function u(){var e,t,s;let{user:l,updateProfile:d,uploadAvatar:n}=(0,v.Ir)(),[x,u]=(0,r.useState)(""),[j,p]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),[b,N]=(0,r.useState)(null),y=(0,r.useRef)(null);(0,r.useEffect)(()=>{l&&(u(l.nickname||""),p(l.email||""),N(null))},[l]);let w=async e=>{e.preventDefault();try{await d({nickname:x})?h.oR.success("账号设置已保存"):h.oR.error("保存失败，请稍后重试")}catch(e){h.oR.error("保存失败，请稍后重试"),console.error("Failed to update user profile:",e)}},C=async e=>{e.preventDefault();let t=e.target.files;if(!t||0===t.length)return;let s=t[0];if(!s.type.startsWith("image/")||s.size>5242880)return;let a=URL.createObjectURL(s);N(a),g(!0);try{if(await n(s))N(null);else throw Error("上传失败")}catch(e){console.error("上传头像失败:",e),N(null)}finally{g(!1),y.current&&(y.current.value=""),URL.revokeObjectURL(a)}},k=b||(null==l?void 0:l.avatarUrl),D=(null==l?void 0:l.nickname)||"",R=(null==l||null==(t=l.email)||null==(e=t.charAt(0))?void 0:e.toUpperCase())||"U",S=(null==(s=D.charAt(0))?void 0:s.toUpperCase())||R;return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-medium mb-6",children:"账号设置"}),(0,a.jsx)("form",{onSubmit:w,children:(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-[var(--text-secondary)] mb-1",children:"昵称"}),(0,a.jsx)(c.p,{id:"username",value:x,onChange:e=>u(e.target.value),placeholder:"输入昵称"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-[var(--text-secondary)] mb-1",children:"邮箱"}),(0,a.jsx)(c.p,{id:"email",type:"email",value:j,onChange:e=>p(e.target.value),placeholder:"用户邮箱",disabled:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"avatar",className:"block text-sm font-medium text-[var(--text-secondary)] mb-1",children:"头像"}),(0,a.jsxs)("div",{className:"bg-[var(--bg-tertiary)] border border-[var(--border-color)] rounded-md p-6 text-center",children:[(0,a.jsx)("div",{className:"mb-4",children:f?(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-[var(--bg-secondary)] mx-auto flex items-center justify-center",children:(0,a.jsx)(m,{className:"w-8 h-8 animate-spin text-[var(--text-secondary)]"})}):k?(0,a.jsxs)(o.eu,{className:"w-20 h-20 mx-auto",children:[(0,a.jsx)(o.BK,{src:k,alt:D||"用户头像"}),(0,a.jsx)(o.q5,{className:"bg-[var(--bg-secondary)] text-2xl font-bold",children:S})]}):(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-[var(--bg-secondary)] mx-auto flex items-center justify-center text-2xl font-bold",children:S})}),(0,a.jsx)(i.$,{type:"button",variant:"outline",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),y.current&&y.current.click()},disabled:f,children:f?"上传中...":"上传新头像"})]})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)(i.$,{type:"submit",children:"保存更改"})})]})}),(0,a.jsx)("input",{type:"file",ref:y,onChange:C,accept:"image/*",className:"hidden"})]})}var j=s(4430),p=s(2732),f=s(3096);function g(){let[e,t]=(0,r.useState)(""),[s,l]=(0,r.useState)(""),[d,n]=(0,r.useState)(""),[o,x]=(0,r.useState)(!1),[m,v]=(0,r.useState)(""),[u,g]=(0,r.useState)(!1),[b,N]=(0,r.useState)(!1),[y,w]=(0,r.useState)(!1),[C,k]=(0,r.useState)(!1),D=async a=>{if(a.preventDefault(),v(""),!e)return void v("请输入当前密码");if(!u)return void v("新密码不符合强度要求");x(!0);try{await j.u.changePassword({currentPassword:e,newPassword:s,confirmPassword:d}),h.oR.success("密码已成功更新"),t(""),l(""),n("")}catch(t){var r,i;console.error("密码更新失败:",t);let e=(null==(i=t.response)||null==(r=i.data)?void 0:r.message)||t.message||"密码更新失败，请重试";h.oR.error(e),v(e)}finally{x(!1)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-medium mb-6",children:"修改密码"}),(0,a.jsx)("form",{onSubmit:D,children:(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"current-password",className:"block text-sm font-medium text-[var(--text-secondary)] mb-1",children:"当前密码"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.p,{id:"current-password",type:b?"text":"password",value:e,onChange:e=>t(e.target.value),className:"bg-[var(--bg-tertiary)] border-[var(--border-color)] text-[var(--text-primary)] input-focus pr-10",placeholder:"输入当前密码",disabled:o}),(0,a.jsx)("button",{type:"button",onClick:()=>N(!b),className:"absolute inset-y-0 right-0 px-3 flex items-center text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:b?(0,a.jsx)(f.N5q,{}):(0,a.jsx)(f.V$C,{})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"new-password",className:"block text-sm font-medium text-[var(--text-secondary)] mb-1",children:"新密码"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.p,{id:"new-password",type:y?"text":"password",value:s,onChange:e=>l(e.target.value),className:"bg-[var(--bg-tertiary)] border-[var(--border-color)] text-[var(--text-primary)] input-focus pr-10",placeholder:"输入新密码",disabled:o}),(0,a.jsx)("button",{type:"button",onClick:()=>w(!y),className:"absolute inset-y-0 right-0 px-3 flex items-center text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:y?(0,a.jsx)(f.N5q,{}):(0,a.jsx)(f.V$C,{})})]}),(0,a.jsx)(p.g,{password:s,onValidationChange:g})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-[var(--text-secondary)] mb-1",children:"确认新密码"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.p,{id:"confirm-password",type:C?"text":"password",value:d,onChange:e=>n(e.target.value),className:"bg-[var(--bg-tertiary)] border-[var(--border-color)] text-[var(--text-primary)] input-focus pr-10",placeholder:"再次输入新密码",disabled:o}),(0,a.jsx)("button",{type:"button",onClick:()=>k(!C),className:"absolute inset-y-0 right-0 px-3 flex items-center text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:C?(0,a.jsx)(f.N5q,{}):(0,a.jsx)(f.V$C,{})})]})]}),m&&(0,a.jsx)("div",{className:"rounded-md p-3 bg-[var(--error-bg)] border border-[var(--error-border)] text-[var(--error-text)] text-sm",children:m}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)(i.$,{type:"submit",disabled:o,children:o?"loading":"更新密码"})})]})})]})}var b=s(5185),N=s(6101),y=s(6081),w=s(5845),C=s(1275),k=s(3655),D="Switch",[R,S]=(0,y.A)(D),[A,I]=R(D),E=r.forwardRef((e,t)=>{let{__scopeSwitch:s,name:l,checked:i,defaultChecked:d,required:n,disabled:c,value:o="on",onCheckedChange:x,form:m,...h}=e,[v,u]=r.useState(null),j=(0,N.s)(t,e=>u(e)),p=r.useRef(!1),f=!v||m||!!v.closest("form"),[g,y]=(0,w.i)({prop:i,defaultProp:null!=d&&d,onChange:x,caller:D});return(0,a.jsxs)(A,{scope:s,checked:g,disabled:c,children:[(0,a.jsx)(k.sG.button,{type:"button",role:"switch","aria-checked":g,"aria-required":n,"data-state":T(g),"data-disabled":c?"":void 0,disabled:c,value:o,...h,ref:j,onClick:(0,b.m)(e.onClick,e=>{y(e=>!e),f&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})}),f&&(0,a.jsx)(M,{control:v,bubbles:!p.current,name:l,value:o,checked:g,required:n,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});E.displayName=D;var z="SwitchThumb",F=r.forwardRef((e,t)=>{let{__scopeSwitch:s,...r}=e,l=I(z,s);return(0,a.jsx)(k.sG.span,{"data-state":T(l.checked),"data-disabled":l.disabled?"":void 0,...r,ref:t})});F.displayName=z;var M=r.forwardRef((e,t)=>{let{__scopeSwitch:s,control:l,checked:i,bubbles:d=!0,...n}=e,c=r.useRef(null),o=(0,N.s)(c,t),x=function(e){let t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(i),m=(0,C.X)(l);return r.useEffect(()=>{let e=c.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(x!==i&&t){let s=new Event("click",{bubbles:d});t.call(e,i),e.dispatchEvent(s)}},[x,i,d]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...n,tabIndex:-1,ref:o,style:{...n.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function T(e){return e?"checked":"unchecked"}M.displayName="SwitchBubbleInput";var P=s(9434);let U=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(E,{className:(0,P.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-[var(--switch-checked-bg)] data-[state=unchecked]:bg-[var(--switch-unchecked-bg)]",s),...r,ref:t,children:(0,a.jsx)(F,{className:(0,P.cn)("pointer-events-none block h-4 w-4 rounded-full bg-[var(--switch-thumb-bg)] shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});function G(){let{notificationSettings:e,updateSettings:t}=(0,v.Ir)(),s=(s,a)=>{t({notifications:{...e,[s]:a}}).then(e=>{e?h.oR.success("通知设置已更新"):h.oR.error("更新失败")}).catch(()=>h.oR.error("更新失败"))};return e?(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-medium mb-6",children:"通知设置"}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"电子邮件通知"}),(0,a.jsx)("p",{className:"text-sm text-[var(--text-secondary)]",children:"接收重要更新和通知到您的邮箱"})]}),(0,a.jsx)(U,{checked:e.email,onCheckedChange:e=>s("email",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"推送通知"}),(0,a.jsx)("p",{className:"text-sm text-[var(--text-secondary)]",children:"在使用应用时接收实时通知"})]}),(0,a.jsx)(U,{checked:e.push,onCheckedChange:e=>s("push",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"产品更新"}),(0,a.jsx)("p",{className:"text-sm text-[var(--text-secondary)]",children:"接收产品新功能和更新通知"})]}),(0,a.jsx)(U,{checked:e.updates,onCheckedChange:e=>s("updates",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"营销邮件"}),(0,a.jsx)("p",{className:"text-sm text-[var(--text-secondary)]",children:"接收促销和市场活动信息"})]}),(0,a.jsx)(U,{checked:e.marketing,onCheckedChange:e=>s("marketing",e)})]})]})]}):null}function L(){let{privacySettings:e,updateSettings:t}=(0,v.Ir)(),s=(s,a)=>{t({privacy:{...e,[s]:a}}).then(e=>{e?h.oR.success("隐私设置已更新"):h.oR.error("更新失败")}).catch(()=>h.oR.error("更新失败"))};return e?(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-medium mb-6",children:"隐私设置"}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"个人资料可见性"}),(0,a.jsx)("p",{className:"text-sm text-[var(--text-secondary)]",children:"设置谁可以查看您的个人资料"})]}),(0,a.jsx)(U,{checked:e.profileVisible,onCheckedChange:e=>s("profileVisible",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"内容可见性"}),(0,a.jsx)("p",{className:"text-sm text-[var(--text-secondary)]",children:"设置谁可以查看您的内容"})]}),(0,a.jsx)(U,{checked:e.contentVisible,onCheckedChange:e=>s("contentVisible",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"活动可见性"}),(0,a.jsx)("p",{className:"text-sm text-[var(--text-secondary)]",children:"设置谁可以查看您的活动状态"})]}),(0,a.jsx)(U,{checked:e.activityVisible,onCheckedChange:e=>s("activityVisible",e)})]})]})]}):null}U.displayName=E.displayName;var O=s(7280);function V(){let{themeSetting:e,updateSettings:t}=(0,v.Ir)(),{setTheme:s}=(0,O.D)(),l=(0,r.useCallback)(a=>{console.log("[ThemeSettings] 用户选择新主题:",a),s(a),t({theme:a}).then(t=>{t?(h.oR.success("主题已应用"),console.log("[ThemeSettings] 主题设置保存成功:",a)):(s(e),h.oR.error("应用失败"),console.error("[ThemeSettings] 主题设置保存失败"))}).catch(t=>{s(e),h.oR.error("应用失败"),console.error("[ThemeSettings] 主题设置保存错误:",t)})},[t,e,s]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-medium mb-6",children:"界面与主题"}),(0,a.jsx)("div",{className:"space-y-5",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--text-secondary)] mb-3",children:"主题选择"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"bg-[#16162d] aspect-video rounded-lg p-3 flex items-center justify-center cursor-pointer border-2 theme-card ".concat("dark"===e?"border-blue-500":"border-transparent hover:border-gray-500"),onClick:()=>l("dark"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"bg-[#252644] w-full h-3 rounded mb-2"}),(0,a.jsx)("div",{className:"bg-[#1a1b33] w-full h-12 rounded mb-2"}),(0,a.jsx)("div",{className:"text-xs text-white",children:"深色"})]})}),(0,a.jsx)("div",{className:"bg-[#f8fafc] aspect-video rounded-lg p-3 flex items-center justify-center cursor-pointer border-2 theme-card ".concat("light"===e?"border-blue-500":"border-transparent hover:border-gray-500"),onClick:()=>l("light"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"bg-[#e2e8f0] w-full h-3 rounded mb-2"}),(0,a.jsx)("div",{className:"bg-white w-full h-12 rounded mb-2"}),(0,a.jsx)("div",{className:"text-xs text-gray-700",children:"浅色"})]})}),(0,a.jsx)("div",{className:"bg-[#fff0f6] aspect-video rounded-lg p-3 flex items-center justify-center cursor-pointer border-2 theme-card ".concat("pink"===e?"border-pink-500":"border-transparent hover:border-pink-300"),onClick:()=>l("pink"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"bg-[#ffdeeb] w-full h-3 rounded mb-2"}),(0,a.jsx)("div",{className:"bg-[#fff5f7] w-full h-12 rounded mb-2"}),(0,a.jsx)("div",{className:"text-xs text-[#702459]",children:"少女粉"})]})})]})]})})]})}let $=(0,x.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),q=()=>{let{wallet:e,walletAssets:t,isLoading:s,error:l,fetchWallet:d}=(0,v.vT)(),[n,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{d()},[d]),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium",children:"资产余额"}),(0,a.jsxs)(i.$,{variant:"outline",className:"w-full md:w-auto flex items-center gap-2",onClick:()=>{try{d()}catch(e){console.error("Error refreshing wallet:",e)}},disabled:s,children:[(0,a.jsx)($,{size:16,className:s?"animate-spin":""}),s?"刷新中...":"刷新余额"]})]}),s?(0,a.jsx)("div",{className:"text-center text-[var(--text-secondary)] py-4",children:"加载钱包余额中..."}):l?(0,a.jsxs)("div",{className:"text-center text-red-500 py-4",children:["加载钱包余额失败: ",l]}):null,!s&&!l&&e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center mb-4 text-sm text-[var(--text-secondary)]",children:[(0,a.jsxs)("span",{children:["钱包ID: ",e.id]}),(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",className:"ml-2 h-6 px-2",onClick:()=>{e&&e.id&&(navigator.clipboard.writeText(e.id),c(!0),setTimeout(()=>c(!1),2e3))},title:"复制钱包ID",children:[(0,a.jsx)(f.DDb,{className:"h-4 w-4"}),n?(0,a.jsx)("span",{className:"text-xs ml-1",children:"已复制"}):null]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:t.length>0?t.map(e=>(0,a.jsxs)("div",{className:"bg-[var(--bg-tertiary)] p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"font-medium mb-2",children:["资产类型: ",e.code]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[var(--text-secondary)]",children:"可用余额"}),(0,a.jsx)("div",{className:"font-bold text-lg",children:e.balance})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[var(--text-secondary)]",children:"冻结余额"}),(0,a.jsx)("div",{className:"font-bold text-lg",children:e.frozenBalance})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[var(--text-secondary)]",children:"总余额"}),(0,a.jsx)("div",{className:"font-bold text-lg",children:e.totalBalance})]})]})]},e.assetTypeId)):(0,a.jsx)("div",{className:"text-center text-[var(--text-secondary)] py-4",children:"暂无资产"})})]}),!s&&!l&&!e&&(0,a.jsx)("div",{className:"text-center text-[var(--text-secondary)] py-4",children:"暂无钱包信息"})]})};function B(){let[e,t]=(0,r.useState)("资产余额");return(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,a.jsx)("div",{className:"w-full md:w-64 shrink-0",children:(0,a.jsxs)("div",{className:"bg-[var(--bg-secondary)] rounded-lg p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-4",children:"设置"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"w-full text-left px-4 py-2 rounded-md text-sm ".concat("资产余额"===e?"settings-tab-active":"settings-tab-inactive"),onClick:()=>t("资产余额"),children:"资产余额"})}),(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"w-full text-left px-4 py-2 rounded-md text-sm ".concat("账号"===e?"settings-tab-active":"settings-tab-inactive"),onClick:()=>t("账号"),children:"账号设置"})}),(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"w-full text-left px-4 py-2 rounded-md text-sm ".concat("密码"===e?"settings-tab-active":"settings-tab-inactive"),onClick:()=>t("密码"),children:"修改密码"})}),(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"w-full text-left px-4 py-2 rounded-md text-sm ".concat("通知"===e?"settings-tab-active":"settings-tab-inactive"),onClick:()=>t("通知"),children:"通知设置"})}),(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"w-full text-left px-4 py-2 rounded-md text-sm ".concat("隐私"===e?"settings-tab-active":"settings-tab-inactive"),onClick:()=>t("隐私"),children:"隐私设置"})}),(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"w-full text-left px-4 py-2 rounded-md text-sm ".concat("主题"===e?"settings-tab-active":"settings-tab-inactive"),onClick:()=>t("主题"),children:"界面与主题"})})]})]})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"bg-[var(--bg-secondary)] rounded-lg p-6",children:["资产余额"===e&&(0,a.jsx)(q,{}),"账号"===e&&(0,a.jsx)(u,{}),"密码"===e&&(0,a.jsx)(g,{}),"通知"===e&&(0,a.jsx)(G,{}),"隐私"===e&&(0,a.jsx)(L,{}),"主题"===e&&(0,a.jsx)(V,{})]})})]})})}var Z=s(7817);function _(){var e,t,s,l,d,n,c,o,x,m;let{commissionRecords:u,comprehensiveData:j,loading:p,error:g,generateCode:b,fetchCommissionRecords:N,fetchComprehensiveData:y,clearError:w}=(0,Z.d)(),{user:C}=(0,v.Ir)(),k=(null==C||null==(e=C.roles)?void 0:e.some(e=>"agent"===e.name))||!1,[D,R]=(0,r.useState)(null);(0,r.useEffect)(()=>{y(),N(),w("getComprehensiveData"),w("getCommissionRecords"),w("generateCode")},[y,N,w]);let S=async()=>{if((null==j?void 0:j.invitationCodesStatistics)&&j.invitationCodesStatistics.length>=5)return void h.oR.error("您已创建5个邀请码，不能再创建更多");b({codeData:{customCode:void 0}}).unwrap().then(e=>{console.log("New code generated:",e),y(),N(),h.oR.success("邀请码创建成功")}).catch(e=>{var t,s,a;console.error("Failed to generate code:",e),(null==(s=e.data)||null==(t=s.message)?void 0:t.includes("cannot create more than 5"))?h.oR.error("您已创建5个邀请码，不能再创建更多"):h.oR.error("创建邀请码失败："+((null==(a=e.data)?void 0:a.message)||"未知错误"))})},A=e=>{navigator.clipboard.writeText(e)},I=(e,t,s)=>e?(0,a.jsxs)("div",{className:"text-center text-[var(--text-secondary)] py-4",children:["加载",s,"中..."]}):t?(0,a.jsxs)("div",{className:"text-center text-red-500 py-4",children:["加载",s,"失败: ",t]}):null;return(0,a.jsxs)("div",{className:"py-4 md:py-8 flex flex-col gap-6 md:gap-8 px-1 md:px-0",children:[(0,a.jsxs)("section",{className:"bg-[var(--bg-tertiary)] rounded-md p-4 md:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4",children:[(0,a.jsx)("div",{className:"text-lg font-bold",children:"邀请链接"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,a.jsx)(i.$,{variant:"default",className:"w-full md:w-auto",onClick:()=>{k?(0,h.lJ)({title:"代理状态",text:"您已经是代理，不需要再申请了"}):(0,h.lJ)({title:"申请成为代理",text:"成为代理有更高的返点率并且可以提现收益，请和客服联系"})},children:k?"代理状态":"申请代理"}),(0,a.jsx)(i.$,{variant:"outline",className:"w-full md:w-auto md:max-w-xs",onClick:S,disabled:p.generateCode,children:p.generateCode?"生成中...":"生成邀请链接"})]})]}),g.generateCode&&(0,a.jsxs)("div",{className:"text-red-500 text-sm mb-2",children:["生成失败: ",g.generateCode]}),I(p.getCommissionRecords,g.getCommissionRecords,"邀请链接"),!p.getCommissionRecords&&!g.getCommissionRecords&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm min-w-[600px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-[var(--text-secondary)] border-b border-[var(--border-color)]",children:[(0,a.jsx)("th",{className:"py-2 text-left pl-2",children:"邀请码/链接"}),(0,a.jsx)("th",{className:"text-left",children:"创建时间"}),(0,a.jsx)("th",{className:"text-left",children:"使用人数"}),(0,a.jsx)("th",{className:"text-left",children:"总收益"})]})}),(0,a.jsx)("tbody",{children:(null==j?void 0:j.invitationCodesStatistics)&&j.invitationCodesStatistics.length>0?j.invitationCodesStatistics.map(e=>(0,a.jsxs)("tr",{className:"border-b border-[var(--border-color)]",children:[(0,a.jsxs)("td",{className:"py-2 pl-2 text-left",children:[(0,a.jsx)("span",{className:"mr-2 font-mono",children:e.code||"N/A"}),(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("button",{className:"inline-flex p-1 hover:bg-[var(--bg-hover)] rounded transition",onClick:()=>{A("".concat(window.location.origin,"/?ref=").concat(e.code)),R(e.code||""),setTimeout(()=>R(null),2e3)},title:"复制邀请链接",disabled:!1,children:(0,a.jsx)(f.DDb,{className:"w-4 h-4 text-[var(--text-secondary)]"})}),D===e.code&&(0,a.jsx)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 text-xs bg-[var(--bg-secondary)] text-[var(--text-primary)] px-2 py-1 rounded shadow whitespace-nowrap",children:"已复制"})]})]}),(0,a.jsx)("td",{className:"text-left",children:e.createdAt?new Date(e.createdAt).toLocaleString():"N/A"}),(0,a.jsx)("td",{className:"text-left",children:e.totalInvitees||0}),(0,a.jsx)("td",{className:"text-left",children:e.totalProfit||0})]},e.code)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"text-center py-4 text-[var(--text-secondary)]",children:p.getComprehensiveData||!j?"":"暂无邀请链接记录"})})})]})}),(0,a.jsx)("div",{className:"md:hidden",children:(null==j?void 0:j.invitationCodesStatistics)&&j.invitationCodesStatistics.length>0?j.invitationCodesStatistics.map(e=>(0,a.jsxs)("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-lg mb-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("div",{className:"font-mono font-medium",children:e.code||"N/A"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{className:"p-1.5 hover:bg-[var(--bg-hover)] rounded transition",onClick:()=>{A("".concat(window.location.origin,"/?ref=").concat(e.code)),R(e.code||""),setTimeout(()=>R(null),2e3)},title:"复制邀请链接",disabled:!1,children:(0,a.jsx)(f.DDb,{className:"w-[18px] h-[18px] text-[var(--text-secondary)]"})}),D===e.code&&(0,a.jsx)("div",{className:"absolute top-full right-0 mt-1 text-xs bg-[var(--bg-secondary)] text-[var(--text-primary)] px-2 py-1 rounded shadow whitespace-nowrap z-10",children:"已复制"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[var(--text-secondary)]",children:"创建时间"}),(0,a.jsx)("div",{children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[var(--text-secondary)]",children:"使用人数"}),(0,a.jsx)("div",{children:e.totalInvitees||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[var(--text-secondary)]",children:"收益"}),(0,a.jsxs)("div",{children:["\xa5",e.totalProfit||0]})]})]})]},e.code)):(0,a.jsx)("div",{className:"text-center py-4 text-[var(--text-secondary)]",children:p.getComprehensiveData||!j?"":"暂无邀请链接记录"})})]})]}),(0,a.jsxs)("section",{className:"px-1 md:px-0",children:[(0,a.jsx)("div",{className:"text-lg md:text-xl font-bold mb-3",children:"数据统计"}),I(p.getComprehensiveData,g.getComprehensiveData,"数据统计"),!p.getComprehensiveData&&!g.getComprehensiveData&&j&&(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-[var(--text-secondary)] border-b border-[var(--border-color)]",children:[(0,a.jsx)("th",{className:"py-2 text-left"}),(0,a.jsx)("th",{className:"py-2 text-left",children:"已邀请"}),(0,a.jsx)("th",{className:"py-2 text-left",children:"充值用户"}),(0,a.jsx)("th",{className:"py-2 text-left",children:"转化率"}),(0,a.jsx)("th",{className:"py-2 text-left",children:"获得积分"}),k&&(0,a.jsx)("th",{className:"py-2 text-left",children:"可提现积分"})]})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"py-3 text-base font-medium",children:"总数据"}),(0,a.jsx)("td",{className:"py-3 text-sm",children:(null==(t=j.referralStatistics)?void 0:t.total)||0}),(0,a.jsx)("td",{className:"py-3 text-sm",children:(null==(s=j.invitationEffectiveness)?void 0:s.activeInvitees)||0}),(0,a.jsx)("td",{className:"py-3 text-sm",children:"".concat((null==(l=j.invitationEffectiveness)?void 0:l.conversionRate)||0,"%")}),(0,a.jsx)("td",{className:"py-3 text-sm",children:j.totalAmount||"0"}),k&&(0,a.jsx)("td",{className:"py-3 text-sm",children:(null==(d=j.invitationEffectiveness)?void 0:d.totalProfit)||"0"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"py-3 text-base font-medium",children:"今日数据"}),(0,a.jsx)("td",{className:"py-3 text-sm",children:(null==(n=j.invitationEffectiveness)?void 0:n.totalInvitees)||0}),(0,a.jsx)("td",{className:"py-3 text-sm",children:(null==(c=j.invitationEffectiveness)?void 0:c.activeInvitees)||0}),(0,a.jsx)("td",{className:"py-3 text-sm",children:"".concat((null==(o=j.invitationEffectiveness)?void 0:o.conversionRate)||0,"%")}),(0,a.jsx)("td",{className:"py-3 text-sm",children:(null==(x=j.invitationEffectiveness)?void 0:x.totalProfit)||"0"}),k&&(0,a.jsx)("td",{className:"py-3 text-sm",children:(null==(m=j.invitationEffectiveness)?void 0:m.averageProfit)||"0"})]})]})]})}),!p.getComprehensiveData&&!g.getComprehensiveData&&!j&&(0,a.jsx)("div",{className:"text-center text-[var(--text-secondary)] py-4",children:"暂无数据"})]}),(0,a.jsxs)("section",{className:"px-1 md:px-0",children:[(0,a.jsx)("div",{className:"text-lg md:text-xl font-bold mb-3",children:"好友统计"}),I(p.getComprehensiveData,g.getComprehensiveData,"好友统计"),!p.getComprehensiveData&&!g.getComprehensiveData&&(null==j?void 0:j.referralStatistics)&&(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-[var(--text-secondary)] border-b border-[var(--border-color)]",children:[(0,a.jsx)("th",{className:"py-2 text-left",children:"一级好友"}),(0,a.jsx)("th",{className:"py-2 text-left",children:"二级好友"}),(0,a.jsx)("th",{className:"py-2 text-left",children:"三级好友"}),(0,a.jsx)("th",{className:"py-2 text-left",children:"好友总数"})]})}),(0,a.jsx)("tbody",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"py-3 text-sm",children:j.referralStatistics.level1||0}),(0,a.jsx)("td",{className:"py-3 text-sm",children:j.referralStatistics.level2||0}),(0,a.jsx)("td",{className:"py-3 text-sm",children:j.referralStatistics.level3||0}),(0,a.jsx)("td",{className:"py-3 text-sm",children:j.referralStatistics.total||0})]})})]})}),!p.getComprehensiveData&&!g.getComprehensiveData&&(!j||!j.referralStatistics)&&(0,a.jsx)("div",{className:"text-center text-[var(--text-secondary)] py-4",children:"暂无下线统计数据"})]}),(0,a.jsxs)("section",{className:"bg-[var(--bg-tertiary)] rounded-md p-4 md:p-6",children:[(0,a.jsx)("div",{className:"text-lg font-bold mb-4",children:"详细记录"}),I(p.getCommissionRecords,g.getCommissionRecords,"详细记录"),!p.getCommissionRecords&&!g.getCommissionRecords&&u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm min-w-[600px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-[var(--text-secondary)] border-b border-[var(--border-color)]",children:[(0,a.jsx)("th",{className:"text-left",children:"用户ID"}),(0,a.jsx)("th",{className:"text-left",children:"层级"}),(0,a.jsx)("th",{className:"text-left",children:"充值金额"}),(0,a.jsx)("th",{className:"text-left",children:"获得奖励"}),(0,a.jsx)("th",{className:"py-2 text-left pl-2",children:"时间"})]})}),(0,a.jsx)("tbody",{children:u.items&&u.items.length>0?u.items.map(e=>(0,a.jsxs)("tr",{className:"border-b border-[var(--border-color)]",children:[(0,a.jsx)("td",{className:"text-left",children:e.sourceUserId||"N/A"}),(0,a.jsx)("td",{className:"text-left",children:e.level||1}),(0,a.jsx)("td",{className:"text-left",children:e.payAmount||0}),(0,a.jsx)("td",{className:"text-left",children:e.commissionAmount||0}),(0,a.jsx)("td",{className:"py-2 pl-2 text-left",children:e.createdAt?new Date(e.createdAt).toLocaleString():"N/A"})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"text-center py-4 text-[var(--text-secondary)]",children:p.getCommissionRecords||!u?"":"暂无详细记录"})})})]})}),(0,a.jsx)("div",{className:"md:hidden",children:u.items&&u.items.length>0?u.items.map(e=>{var t;return(0,a.jsxs)("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-lg mb-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("div",{className:"font-medium",children:["用户ID: ",(null==(t=e.receiver)?void 0:t.id)||"N/A"]}),(0,a.jsx)("div",{className:"text-sm text-[var(--text-secondary)]",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[var(--text-secondary)]",children:"层级"}),(0,a.jsx)("div",{children:e.level||1})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[var(--text-secondary)]",children:"充值金额"}),(0,a.jsx)("div",{children:e.payAmount||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[var(--text-secondary)]",children:"获得奖励"}),(0,a.jsx)("div",{children:e.commissionAmount||0})]})]})]},e.id)}):(0,a.jsx)("div",{className:"text-center py-4 text-[var(--text-secondary)]",children:p.getCommissionRecords||!u?"":"暂无详细记录"})})]})]})]})}var J=s(2847),H=s(4354),K=s(5695);function X(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,P.cn)("animate-pulse rounded-md bg-muted",t),...s})}function Q(){let e=(0,K.useRouter)(),t=(0,d.G)(n.xu),{favoriteCharacters:s,isLoading:l,error:i,fetchFavorites:c}=(0,J.Q$)();(0,r.useEffect)(()=>{(null==t?void 0:t.id)&&c(t.id,1,100)},[null==t?void 0:t.id,c]);let o=t=>{e.push("/character?id=".concat(t))};return l?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 py-6",children:Array.from({length:4}).map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,a.jsx)(X,{className:"h-[125px] w-full rounded-xl bg-muted"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(X,{className:"h-4 w-[250px] bg-muted"}),(0,a.jsx)(X,{className:"h-4 w-[200px] bg-muted"})]})]},t))}):i?(0,a.jsxs)("div",{className:"text-destructive text-center py-10",children:["加载收藏角色失败: ",i]}):s&&0!==s.length?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 py-6",children:s.map(e=>(0,a.jsx)(H.A,{character:e,onClick:o},e.id))}):(0,a.jsx)("div",{className:"text-muted-foreground text-center py-10",children:"你还没有收藏任何角色。"})}var W=s(9249),Y=s(6168),ee=s(3299);class et{async getActivities(){try{let e=await Y.o.activities.getActivities({page:1,limit:50,status:void 0});if(!e.data.items)throw Error("Failed to get activities: Invalid response data");return console.log("获取到的活动数据:",e.data),e.data.items}catch(e){throw console.error("Failed to get activities:",e),e}}async getActivityDetails(e){try{let t=await Y.o.activities.getActivityDetails(e);if(!t.data)throw Error("Failed to get activity details: Invalid response data");return t.data}catch(t){throw console.error("Failed to get activity details for ".concat(e.activityId,":"),t),t}}async getActivityHistory(e){try{let t=await Y.o.activities.getActivityHistory(e);if(!t.data)throw Error("Failed to get activity history: Invalid response data");return t.data}catch(e){throw console.error("Failed to get activity history:",e),e}}}let es=new(et=(0,W.Cg)([ee.A.Singleton],et));var ea=s(6766);function er(e){try{return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/\//g,"-")}catch(t){return console.error("日期格式化错误:",t),e}}function el(e){let{activity:t}=e,s=t.metadata,r=null==s?void 0:s.bannerUrl;return(0,a.jsx)("div",{className:"bg-card rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow border border-border",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row",children:[r?(0,a.jsx)("div",{className:"relative h-[160px] md:h-auto md:w-1/3",children:(0,a.jsx)(ea.default,{src:r,alt:t.name,fill:!0,style:{objectFit:"cover"}})}):(0,a.jsx)("div",{className:"h-[160px] md:h-auto md:w-1/3 bg-muted flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-muted-foreground",children:"无活动图片"})}),(0,a.jsxs)("div",{className:"p-4 md:w-2/3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:t.name}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(((e,t)=>{let s=new Date,a=new Date(t);if("ENDED"===e||a<s);else if("ONGOING"===e)return"text-green-500";else if("UPCOMING"===e)return"text-blue-500";return"text-gray-500"})(t.status,t.endTime)),children:((e,t)=>{let s=new Date,a=new Date(t);return"ENDED"===e||a<s?"已结束":"ONGOING"===e?"进行中":"UPCOMING"===e?"即将开始":"未知状态"})(t.status,t.endTime)})]}),t.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:t.description}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["开始: ",er(t.startTime)]}),(0,a.jsxs)("span",{children:["结束: ",er(t.endTime)]})]}),t.rewards&&t.rewards.length>0&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-border",children:[(0,a.jsx)("p",{className:"text-xs font-medium",children:"活动奖励:"}),(0,a.jsx)("div",{className:"mt-1 flex flex-wrap gap-2",children:t.rewards.map((e,t)=>(0,a.jsx)("span",{className:"inline-block px-2 py-1 rounded-full bg-muted text-xs",children:e.description||"奖励 ".concat(t+1)},t))})]})]})]})})}function ei(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null);if((0,r.useEffect)(()=>{(async()=>{try{l(!0);let e=await es.getActivities();Array.isArray(e)?t(e):(console.error("获取到的活动数据不是数组:",e),t([]),d("活动数据格式错误"))}catch(e){console.error("获取活动失败:",e),d("获取活动列表失败，请稍后再试"),t([])}finally{l(!1)}})()},[]),s)return(0,a.jsx)("div",{className:"space-y-6 py-6",children:Array.from({length:3}).map((e,t)=>(0,a.jsxs)("div",{className:"bg-card rounded-xl overflow-hidden border border-border",children:[(0,a.jsx)(X,{className:"h-[160px] w-full bg-muted"}),(0,a.jsxs)("div",{className:"p-4 space-y-2",children:[(0,a.jsx)(X,{className:"h-6 w-1/2 bg-muted"}),(0,a.jsx)(X,{className:"h-4 w-3/4 bg-muted"}),(0,a.jsx)(X,{className:"h-4 w-1/4 bg-muted"})]})]},t))});if(i)return(0,a.jsx)("div",{className:"text-destructive text-center py-10",children:i});if(!e||0===e.length)return(0,a.jsx)("div",{className:"text-muted-foreground text-center py-10",children:"暂无活动内容。"});let n=Array.isArray(e)?e:[];return(0,a.jsx)("div",{className:"space-y-6 py-6",children:n.map(e=>(0,a.jsx)(el,{activity:e},e.id))})}function ed(){var e;let t=(0,d.G)(n.xu),[s,c]=(0,r.useState)(!1),[x,m]=(0,r.useState)("设置"),[h,v]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{c(!0)},[]),(0,a.jsxs)("main",{className:"min-h-screen bg-background text-foreground",children:[(0,a.jsxs)("div",{className:"relative pt-20",children:[(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full h-64 overflow-hidden z-0",children:[(0,a.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-background/80 to-muted/80 opacity-70"}),(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-background/30"})]}),(0,a.jsx)("div",{className:"relative z-10 max-w-6xl mx-auto px-4 py-6",children:s&&t?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-row items-start md:items-end gap-4 md:gap-6 mb-8",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-muted rounded-full border-4 border-background overflow-hidden",children:(0,a.jsxs)(o.eu,{className:"w-full h-full",children:[(0,a.jsx)(o.BK,{src:t.avatarUrl,alt:t.nickname||"user",className:"object-cover"}),(0,a.jsx)(o.q5,{className:"bg-[var(--bg-tertiary)] text-[var(--text-primary)] text-3xl font-bold",children:null==(e=t.nickname)?void 0:e.charAt(0).toUpperCase()})]})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:t.nickname||"user"}),(0,a.jsxs)("div",{className:"flex items-center mt-1 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["ID: ",t.id]}),(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)(i.$,{variant:"ghost",size:"sm",className:"ml-2 h-6 px-2",onClick:()=>{t&&t.id&&(navigator.clipboard.writeText(t.id),v(!0),setTimeout(()=>v(!1),2e3))},title:"复制用户ID",children:(0,a.jsx)(f.DDb,{className:"h-4 w-4"})}),h&&(0,a.jsx)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 text-xs bg-[var(--bg-secondary)] text-[var(--text-primary)] px-2 py-1 rounded shadow whitespace-nowrap",children:"已复制"})]})]}),(0,a.jsxs)("div",{className:"flex gap-6 mt-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold",children:"0"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"粉丝"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold",children:"0"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"关注"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold",children:"0"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"获赞"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold",children:"0"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"收藏"})]})]})]})]}),(0,a.jsx)("div",{className:"border-b border-border",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("button",{className:"px-6 py-3 text-sm font-medium ".concat("设置"===x?"text-foreground border-b-2 border-primary":"text-muted-foreground hover:text-foreground"),onClick:()=>m("设置"),children:"设置"}),(0,a.jsx)("button",{className:"px-6 py-3 text-sm font-medium ".concat("邀请"===x?"text-foreground border-b-2 border-primary":"text-muted-foreground hover:text-foreground"),onClick:()=>m("邀请"),children:"邀请"}),(0,a.jsx)("button",{className:"px-6 py-3 text-sm font-medium ".concat("收藏"===x?"text-foreground border-b-2 border-primary":"text-muted-foreground hover:text-foreground"),onClick:()=>m("收藏"),children:"收藏"}),(0,a.jsx)("button",{className:"px-6 py-3 text-sm font-medium ".concat("活动"===x?"text-foreground border-b-2 border-primary":"text-muted-foreground hover:text-foreground"),onClick:()=>m("活动"),children:"活动"})]})}),(0,a.jsxs)("div",{className:"py-6",children:["设置"===x&&(0,a.jsx)(B,{}),"邀请"===x&&(0,a.jsx)(_,{}),"收藏"===x&&(0,a.jsx)(Q,{}),"活动"===x&&(0,a.jsx)(ei,{})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-row items-start md:items-end gap-4 md:gap-6 mb-8",children:[(0,a.jsx)(X,{className:"w-24 h-24 rounded-full bg-muted"}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)(X,{className:"h-8 w-32 bg-muted rounded-md mb-4"}),(0,a.jsx)("div",{className:"flex gap-6 mt-4",children:(0,a.jsx)(X,{className:"h-10 w-16 bg-muted rounded-md"})})]}),(0,a.jsx)(X,{className:"w-24 h-10 bg-muted rounded-md"})]}),(0,a.jsx)("div",{className:"text-center py-20",children:(0,a.jsx)(X,{className:"h-6 w-32 bg-muted rounded-md mx-auto"})})]})})]}),(0,a.jsx)(l.default,{})]})}},5651:(e,t,s)=>{Promise.resolve().then(s.bind(s,5590))},7464:(e,t,s)=>{"use strict";s.d(t,{w1:()=>o,CA:()=>x,kZ:()=>m});var a=s(6439),r=s(9249),l=s(6168),i=s(3299);class d{async generateInvitationCode(e){try{return(await l.o.invitation.generateInvitationCode({generateCodeRequestDto:e})).data}catch(e){throw console.error("Failed to generate invitation code:",e),e}}async getCommissionRecords(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return(await l.o.invitation.getCommissionRecords({page:e,limit:t,...s})).data}catch(e){throw console.error("Failed to get commission records:",e),e}}async getComprehensiveInviteData(){try{return(await l.o.invitation.getComprehensiveInviteData()).data}catch(e){throw console.error("Failed to get comprehensive invite data:",e),e}}}let n=new(d=(0,r.Cg)([i.A.Singleton],d)),c="invitation",o=(0,a.zD)("".concat(c,"/generateCode"),async(e,t)=>{let{rejectWithValue:s}=t;try{return await n.generateInvitationCode(e.codeData)}catch(e){return s(e instanceof Error?e.message:"Failed to generate invitation code")}}),x=(0,a.zD)("".concat(c,"/getCommissionRecords"),async(e,t)=>{let{rejectWithValue:s}=t;try{let t="object"==typeof e&&(null==e?void 0:e.page)?e.page:1,s="object"==typeof e&&(null==e?void 0:e.limit)?e.limit:10,a={type:"object"==typeof e&&(null==e?void 0:e.type)?e.type:void 0,startDate:"object"==typeof e&&(null==e?void 0:e.startDate)?e.startDate:void 0,endDate:"object"==typeof e&&(null==e?void 0:e.endDate)?e.endDate:void 0};return await n.getCommissionRecords(t,s,a)}catch(e){return s(e instanceof Error?e.message:"Failed to get commission records")}}),m=(0,a.zD)("".concat(c,"/getComprehensiveInviteData"),async(e,t)=>{let{rejectWithValue:s}=t;try{return await n.getComprehensiveInviteData()}catch(e){return s(e instanceof Error?e.message:"Failed to get comprehensive invite data")}})},7817:(e,t,s)=>{"use strict";s.d(t,{d:()=>n});var a=s(2115),r=s(2045),l=s(1183),i=s(7464),d=s(9751);let n=()=>{let e=(0,r.j)(),t=(0,r.G)(l.J1),s=(0,r.G)(l.E4),n=(0,r.G)(l.BV),c=(0,r.G)(l.Kp),o=(0,r.G)(l.In),x=(0,a.useCallback)(t=>e((0,i.w1)(t)),[e]),m=(0,a.useCallback)(t=>{e((0,i.CA)(t))},[e]);return{invitationCode:t,commissionRecords:s,comprehensiveData:n,loading:c,error:o,generateCode:x,fetchCommissionRecords:m,fetchComprehensiveData:(0,a.useCallback)(()=>{e((0,i.kZ)())},[e]),clearError:(0,a.useCallback)(t=>{e((0,d.f3)(t))},[e])}}},9751:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>c,f3:()=>n,uJ:()=>d});var a=s(6439),r=s(7464);let l={invitationCode:null,commissionRecords:null,comprehensiveData:null,loading:{generateCode:!1,getCommissionRecords:!1,getComprehensiveData:!1},error:{generateCode:null,getCommissionRecords:null,getComprehensiveData:null}},i=(0,a.Z0)({name:"invitation",initialState:l,reducers:{clearInvitationState:()=>l,clearInvitationError:(e,t)=>{e.error[t.payload]=null}},extraReducers:e=>{e.addCase(r.w1.pending,e=>{e.loading.generateCode=!0,e.error.generateCode=null}).addCase(r.w1.fulfilled,(e,t)=>{e.loading.generateCode=!1,e.invitationCode=t.payload}).addCase(r.w1.rejected,(e,t)=>{e.loading.generateCode=!1,e.error.generateCode=t.payload||"Unknown error"}),e.addCase(r.CA.pending,e=>{e.loading.getCommissionRecords=!0,e.error.getCommissionRecords=null}).addCase(r.CA.fulfilled,(e,t)=>{e.loading.getCommissionRecords=!1,e.commissionRecords=t.payload}).addCase(r.CA.rejected,(e,t)=>{e.loading.getCommissionRecords=!1,e.error.getCommissionRecords=t.payload||"Unknown error"}),e.addCase(r.kZ.pending,e=>{e.loading.getComprehensiveData=!0,e.error.getComprehensiveData=null}).addCase(r.kZ.fulfilled,(e,t)=>{e.loading.getComprehensiveData=!1,e.comprehensiveData=t.payload}).addCase(r.kZ.rejected,(e,t)=>{e.loading.getComprehensiveData=!1,e.error.getComprehensiveData=t.payload||"Unknown error"})}}),{clearInvitationState:d,clearInvitationError:n}=i.actions,c=i.reducer}},e=>{var t=t=>e(e.s=t);e.O(0,[951,320,105,428,116,455,613,127,598,441,684,358],()=>t(5651)),_N_E=e.O()}]);